{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { Icon24Cancel } from \"@vkontakte/icons\";\nimport { classNames, noop } from \"@vkontakte/vkjs\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useDOM } from \"../../lib/dom\";\nimport { Platform } from \"../../lib/platform\";\nimport { getTitleFromChildren } from \"../../lib/utils\";\nimport { IconButton } from \"../IconButton/IconButton\";\nimport { Tappable } from \"../Tappable/Tappable\";\n/**\n * @see https://vkcom.github.io/VKUI/#/RemovableIos\n */\nvar RemovableIos = function (param) {\n  var onRemove = param.onRemove,\n    removePlaceholder = param.removePlaceholder,\n    removePlaceholderString = param.removePlaceholderString,\n    children = param.children;\n  var window = useDOM().window;\n  var removeButtonRef = React.useRef(null);\n  var disabledRef = React.useRef(true);\n  var _React_useState = _sliced_to_array(React.useState(0), 2),\n    removeOffset = _React_useState[0],\n    updateRemoveOffset = _React_useState[1];\n  useGlobalEventListener(window, \"click\", function () {\n    if (removeOffset > 0) {\n      updateRemoveOffset(0);\n    }\n  }, {\n    capture: true\n  });\n  var onRemoveTransitionEnd = function () {\n    if (removeOffset > 0) {\n      var _removeButtonRef_current, _removeButtonRef;\n      (_removeButtonRef = removeButtonRef) === null || _removeButtonRef === void 0 ? void 0 : (_removeButtonRef_current = _removeButtonRef.current) === null || _removeButtonRef_current === void 0 ? void 0 : _removeButtonRef_current.focus();\n    } else {\n      disabledRef.current = true;\n    }\n  };\n  var onRemoveActivateClick = function (e) {\n    e.stopPropagation();\n    if (!removeButtonRef.current) {\n      return;\n    }\n    var offsetWidth = removeButtonRef.current.offsetWidth;\n    disabledRef.current = false;\n    updateRemoveOffset(offsetWidth);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"vkuiRemovable__content\", \"vkuiInternalRemovable__content\"),\n    style: {\n      transform: \"translateX(-\".concat(removeOffset !== null && removeOffset !== void 0 ? removeOffset : 0, \"px)\")\n    },\n    onTransitionEnd: onRemoveTransitionEnd\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    hasActive: false,\n    hasHover: false,\n    \"aria-label\": removePlaceholderString,\n    className: classNames(\"vkuiRemovable__action\", \"vkuiRemovable__toggle\"),\n    onClick: onRemoveActivateClick,\n    disabled: removeOffset > 0\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"vkuiRemovable__toggle-in\",\n    role: \"presentation\"\n  })), children, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"vkuiRemovable__offset\",\n    \"aria-hidden\": true\n  }), /*#__PURE__*/React.createElement(Tappable, {\n    Component: \"button\",\n    hasActive: false,\n    hasHover: false,\n    disabled: disabledRef.current,\n    getRootRef: removeButtonRef,\n    className: \"vkuiRemovable__remove\",\n    onClick: onRemove\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"vkuiRemovable__remove-in\"\n  }, removePlaceholder)));\n};\n/**\n * @see https://vkcom.github.io/VKUI/#/Removable\n */\nexport var Removable = function (_param) {\n  var getRootRef = _param.getRootRef,\n    children = _param.children,\n    _param_onRemove = _param.onRemove,\n    onRemove = _param_onRemove === void 0 ? noop : _param_onRemove,\n    _param_removePlaceholder = _param.removePlaceholder,\n    removePlaceholder = _param_removePlaceholder === void 0 ? \"Удалить\" : _param_removePlaceholder,\n    _param_align = _param.align,\n    align = _param_align === void 0 ? \"center\" : _param_align,\n    className = _param.className,\n    _param_indent = _param.indent,\n    indent = _param_indent === void 0 ? false : _param_indent,\n    restProps = _object_without_properties(_param, [\"getRootRef\", \"children\", \"onRemove\", \"removePlaceholder\", \"align\", \"className\", \"indent\"]);\n  var platform = usePlatform();\n  var ref = useExternRef(getRootRef);\n  var onRemoveClick = function (e) {\n    e.preventDefault();\n    onRemove(e);\n  };\n  var removePlaceholderString = getTitleFromChildren(removePlaceholder);\n  return /*#__PURE__*/React.createElement(\"div\", _object_spread_props(_object_spread({}, restProps), {\n    ref: ref,\n    className: classNames(platform === Platform.IOS && \"vkuiRemovable--ios\", align === \"start\" && \"vkuiRemovable--align-start\", indent && \"vkuiRemovable--indent\", className)\n  }), platform !== Platform.IOS && /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"vkuiRemovable__content\", \"vkuiInternalRemovable__content\")\n  }, children, /*#__PURE__*/React.createElement(IconButton, {\n    activeMode: \"opacity\",\n    hoverMode: \"opacity\",\n    className: \"vkuiRemovable__action\",\n    onClick: onRemoveClick,\n    \"aria-label\": removePlaceholderString\n  }, /*#__PURE__*/React.createElement(Icon24Cancel, {\n    role: \"presentation\"\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"vkuiRemovable__offset\",\n    \"aria-hidden\": true\n  })), platform === Platform.IOS && /*#__PURE__*/React.createElement(RemovableIos, {\n    onRemove: onRemoveClick,\n    removePlaceholder: removePlaceholder,\n    removePlaceholderString: removePlaceholderString\n  }, children));\n};","map":{"version":3,"names":["React","Icon24Cancel","classNames","noop","useExternRef","useGlobalEventListener","usePlatform","useDOM","Platform","getTitleFromChildren","IconButton","Tappable","RemovableIos","param","onRemove","removePlaceholder","removePlaceholderString","children","window","removeButtonRef","useRef","disabledRef","_React_useState","_sliced_to_array","useState","removeOffset","updateRemoveOffset","capture","onRemoveTransitionEnd","_removeButtonRef_current","_removeButtonRef","current","focus","onRemoveActivateClick","e","stopPropagation","offsetWidth","createElement","className","style","transform","concat","onTransitionEnd","hasActive","hasHover","onClick","disabled","role","Component","getRootRef","Removable","_param","_param_onRemove","_param_removePlaceholder","_param_align","align","_param_indent","indent","restProps","_object_without_properties","platform","ref","onRemoveClick","preventDefault","_object_spread_props","_object_spread","IOS","activeMode","hoverMode"],"sources":["/Users/evgeny/Desktop/VsCodeProjects/vk-client/vk-client/node_modules/@vkontakte/vkui/src/components/Removable/Removable.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Icon24Cancel } from '@vkontakte/icons';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useDOM } from '../../lib/dom';\nimport { Platform } from '../../lib/platform';\nimport { getTitleFromChildren } from '../../lib/utils';\nimport { HasChildren, HasRootRef } from '../../types';\nimport { IconButton } from '../IconButton/IconButton';\nimport { Tappable } from '../Tappable/Tappable';\nimport styles from './Removable.module.css';\n\nexport interface RemovableProps {\n  /**\n   * iOS only. Текст в выезжающей кнопке для удаления ячейки.\n   */\n  removePlaceholder?: React.ReactNode;\n  /**\n   * Коллбэк срабатывает при клике на контрол удаления.\n   */\n  onRemove?: (e: React.MouseEvent, rootEl?: HTMLElement | null) => void;\n}\n\ninterface RemovableIosOwnProps extends RemovableProps, HasChildren {\n  removePlaceholderString?: string;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/RemovableIos\n */\nconst RemovableIos = ({\n  onRemove,\n  removePlaceholder,\n  removePlaceholderString,\n  children,\n}: RemovableIosOwnProps) => {\n  const { window } = useDOM();\n\n  const removeButtonRef = React.useRef<HTMLElement>(null);\n  const disabledRef = React.useRef(true);\n  const [removeOffset, updateRemoveOffset] = React.useState(0);\n\n  useGlobalEventListener(\n    window,\n    'click',\n    () => {\n      if (removeOffset > 0) {\n        updateRemoveOffset(0);\n      }\n    },\n    { capture: true },\n  );\n\n  const onRemoveTransitionEnd = () => {\n    if (removeOffset > 0) {\n      removeButtonRef?.current?.focus();\n    } else {\n      disabledRef.current = true;\n    }\n  };\n\n  const onRemoveActivateClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    if (!removeButtonRef.current) {\n      return;\n    }\n    const { offsetWidth } = removeButtonRef.current;\n    disabledRef.current = false;\n    updateRemoveOffset(offsetWidth);\n  };\n\n  return (\n    <div\n      className={classNames(styles['Removable__content'], 'vkuiInternalRemovable__content')}\n      style={{ transform: `translateX(-${removeOffset ?? 0}px)` }}\n      onTransitionEnd={onRemoveTransitionEnd}\n    >\n      <IconButton\n        hasActive={false}\n        hasHover={false}\n        aria-label={removePlaceholderString}\n        className={classNames(styles['Removable__action'], styles['Removable__toggle'])}\n        onClick={onRemoveActivateClick}\n        disabled={removeOffset > 0}\n      >\n        <i className={styles['Removable__toggle-in']} role=\"presentation\" />\n      </IconButton>\n      {children}\n\n      <span className={styles['Removable__offset']} aria-hidden />\n\n      <Tappable\n        Component=\"button\"\n        hasActive={false}\n        hasHover={false}\n        disabled={disabledRef.current}\n        getRootRef={removeButtonRef}\n        className={styles['Removable__remove']}\n        onClick={onRemove}\n      >\n        <span className={styles['Removable__remove-in']}>{removePlaceholder}</span>\n      </Tappable>\n    </div>\n  );\n};\n\ninterface RemovableOwnProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    RemovableProps,\n    HasRootRef<HTMLDivElement> {\n  /**\n   * Расположение кнопки удаления.\n   */\n  align?: 'start' | 'center';\n  /**\n   * Скрывает кнопку, но оставляет отступ.\n   * @since 5.4.0\n   */\n  indent?: boolean;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Removable\n */\nexport const Removable = ({\n  getRootRef,\n  children,\n  onRemove = noop,\n  removePlaceholder = 'Удалить',\n  align = 'center',\n  className,\n  indent = false,\n  ...restProps\n}: RemovableOwnProps) => {\n  const platform = usePlatform();\n\n  const ref = useExternRef(getRootRef);\n\n  const onRemoveClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    onRemove(e);\n  };\n\n  const removePlaceholderString: string = getTitleFromChildren(removePlaceholder);\n\n  return (\n    <div\n      {...restProps}\n      ref={ref}\n      className={classNames(\n        platform === Platform.IOS && styles['Removable--ios'],\n        align === 'start' && styles['Removable--align-start'],\n        indent && styles['Removable--indent'],\n        className,\n      )}\n    >\n      {platform !== Platform.IOS && (\n        <div className={classNames(styles['Removable__content'], 'vkuiInternalRemovable__content')}>\n          {children}\n\n          <IconButton\n            activeMode=\"opacity\"\n            hoverMode=\"opacity\"\n            className={styles['Removable__action']}\n            onClick={onRemoveClick}\n            aria-label={removePlaceholderString}\n          >\n            <Icon24Cancel role=\"presentation\" />\n          </IconButton>\n\n          <span className={styles['Removable__offset']} aria-hidden />\n        </div>\n      )}\n\n      {platform === Platform.IOS && (\n        <RemovableIos\n          onRemove={onRemoveClick}\n          removePlaceholder={removePlaceholder}\n          removePlaceholderString={removePlaceholderString}\n        >\n          {children}\n        </RemovableIos>\n      )}\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}