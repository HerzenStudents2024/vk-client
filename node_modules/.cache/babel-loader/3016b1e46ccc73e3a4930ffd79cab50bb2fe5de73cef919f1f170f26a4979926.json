{"ast":null,"code":"import { querystring } from \"@vkontakte/vkjs\";\nimport { computeBrowserInfo } from \"./browser\";\nimport { canUseDOM } from \"./dom\";\nexport var Platform;\n(function (Platform) {\n  Platform[\"ANDROID\"] = \"android\";\n  Platform[\"IOS\"] = \"ios\";\n  Platform[\"VKCOM\"] = \"vkcom\";\n})(Platform || (Platform = {}));\nvar PLATFORM_ALIAS = {\n  desktop_web: Platform.VKCOM\n};\nfunction isPlatformAlias(platformAlias) {\n  return platformAlias in PLATFORM_ALIAS;\n}\n/**\n * Значение, которое передаётся в качестве query-параметра при открытии VK Mini Apps\n * @see {@link https://dev.vk.com/mini-apps/development/launch-params#vk_platform vk_platform}\n */\nfunction getPlatformByQueryString(queryString) {\n  try {\n    var parsedQuery = querystring.parse(queryString);\n    var platformAliasByQuery = parsedQuery[\"vk_platform\"];\n    return typeof platformAliasByQuery === \"string\" && isPlatformAlias(platformAliasByQuery) ? PLATFORM_ALIAS[platformAliasByQuery] : undefined;\n  } catch (e) {\n    console.warn(e);\n    return undefined;\n  }\n}\nvar platformByQueryString = canUseDOM ? getPlatformByQueryString(location.search) : undefined;\nexport function platform(browserInfo) {\n  if (platformByQueryString) {\n    return platformByQueryString;\n  }\n  if (!browserInfo) {\n    browserInfo = computeBrowserInfo();\n  }\n  return browserInfo.system === \"ios\" ? Platform.IOS : Platform.ANDROID;\n}","map":{"version":3,"names":["querystring","computeBrowserInfo","canUseDOM","Platform","PLATFORM_ALIAS","desktop_web","VKCOM","isPlatformAlias","platformAlias","getPlatformByQueryString","queryString","parsedQuery","parse","platformAliasByQuery","undefined","e","console","warn","platformByQueryString","location","search","platform","browserInfo","system","IOS","ANDROID"],"sources":["/Users/evgeny/Desktop/VsCodeProjects/vk-client/vk-client/node_modules/@vkontakte/vkui/src/lib/platform.ts"],"sourcesContent":["import { querystring } from '@vkontakte/vkjs';\nimport { LiteralUnion } from '../types';\nimport { BrowserInfo, computeBrowserInfo } from './browser';\nimport { canUseDOM } from './dom';\n\nexport enum Platform {\n  ANDROID = 'android',\n  IOS = 'ios',\n  VKCOM = 'vkcom',\n}\n\nconst PLATFORM_ALIAS = {\n  desktop_web: Platform.VKCOM,\n};\n\nfunction isPlatformAlias(platformAlias: string): platformAlias is keyof typeof PLATFORM_ALIAS {\n  return platformAlias in PLATFORM_ALIAS;\n}\n\n/**\n * Значение, которое передаётся в качестве query-параметра при открытии VK Mini Apps\n * @see {@link https://dev.vk.com/mini-apps/development/launch-params#vk_platform vk_platform}\n */\nfunction getPlatformByQueryString(queryString: string): Platform | undefined {\n  try {\n    const parsedQuery = querystring.parse(queryString);\n    const platformAliasByQuery = parsedQuery['vk_platform'];\n\n    return typeof platformAliasByQuery === 'string' && isPlatformAlias(platformAliasByQuery)\n      ? PLATFORM_ALIAS[platformAliasByQuery]\n      : undefined;\n  } catch (e) {\n    console.warn(e);\n\n    return undefined;\n  }\n}\n\nconst platformByQueryString = canUseDOM ? getPlatformByQueryString(location.search) : undefined;\n\nexport type PlatformType = LiteralUnion<'android' | 'ios' | 'vkcom', string>;\n\nexport function platform(browserInfo?: BrowserInfo): PlatformType {\n  if (platformByQueryString) {\n    return platformByQueryString;\n  }\n\n  if (!browserInfo) {\n    browserInfo = computeBrowserInfo();\n  }\n\n  return browserInfo.system === 'ios' ? Platform.IOS : Platform.ANDROID;\n}\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ;AAE5B,SAAsBC,kBAAkB,QAAQ;AAChD,SAASC,SAAS,QAAQ;WAEnBC,QAAA;WAAKA,QAAQ;EAARA,QAAA,CACV,aAAU;EADAA,QAAA,CAEV,SAAM;EAFIA,QAAA,CAGV,WAAQ;GAHEA,QAAA,KAAAA,QAAA;AAMZ,IAAMC,cAAA,GAAiB;EACrBC,WAAA,EAAaF,QAAA,CAASG;AACxB;AAEA,SAASC,gBAAgBC,aAAqB;EAC5C,OAAOA,aAAA,IAAiBJ,cAAA;AAC1B;AAEA;;;;AAIA,SAASK,yBAAyBC,WAAmB;EACnD,IAAI;IACF,IAAMC,WAAA,GAAcX,WAAA,CAAYY,KAAK,CAACF,WAAA;IACtC,IAAMG,oBAAA,GAAuBF,WAAW,CAAC,cAAc;IAEvD,OAAO,OAAOE,oBAAA,KAAyB,YAAYN,eAAA,CAAgBM,oBAAA,IAC/DT,cAAc,CAACS,oBAAA,CAAqB,GACpCC,SAAA;EACN,EAAE,OAAOC,CAAA,EAAG;IACVC,OAAA,CAAQC,IAAI,CAACF,CAAA;IAEb,OAAOD,SAAA;EACT;AACF;AAEA,IAAMI,qBAAA,GAAwBhB,SAAA,GAAYO,wBAAA,CAAyBU,QAAA,CAASC,MAAM,IAAIN,SAAA;AAItF,OAAO,SAASO,SAASC,WAAyB;EAChD,IAAIJ,qBAAA,EAAuB;IACzB,OAAOA,qBAAA;EACT;EAEA,IAAI,CAACI,WAAA,EAAa;IAChBA,WAAA,GAAcrB,kBAAA;EAChB;EAEA,OAAOqB,WAAA,CAAYC,MAAM,KAAK,QAAQpB,QAAA,CAASqB,GAAG,GAAGrB,QAAA,CAASsB,OAAO;AACvE"},"metadata":{},"sourceType":"module","externalDependencies":[]}