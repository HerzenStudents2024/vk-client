{"ast":null,"code":"import { _ as _object_spread } from \"@swc/helpers/_/_object_spread\";\nimport { _ as _object_spread_props } from \"@swc/helpers/_/_object_spread_props\";\nimport { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { classNames } from \"@vkontakte/vkjs\";\nimport { ImageBaseBadge } from \"./ImageBaseBadge/ImageBaseBadge\";\nimport { ImageBaseOverlay } from \"./ImageBaseOverlay/ImageBaseOverlay\";\nimport { ImageBaseContext } from \"./context\";\nimport { validateFallbackIcon, validateSize } from \"./validators\";\nexport { getBadgeIconSizeByImageBaseSize, getFallbackIconSizeByImageBaseSize, getOverlayIconSizeByImageBaseSize } from \"./helpers\";\nexport { ImageBaseContext };\n/**\n * @see https://vkcom.github.io/VKUI/#/ImageBase\n */\nexport var ImageBase = function (_param) {\n  var alt = _param.alt,\n    crossOrigin = _param.crossOrigin,\n    decoding = _param.decoding,\n    loading = _param.loading,\n    referrerPolicy = _param.referrerPolicy,\n    sizes = _param.sizes,\n    src = _param.src,\n    srcSet = _param.srcSet,\n    useMap = _param.useMap,\n    getRef = _param.getRef,\n    _param_size = _param.size,\n    size = _param_size === void 0 ? 24 : _param_size,\n    width = _param.width,\n    height = _param.height,\n    style = _param.style,\n    className = _param.className,\n    getRootRef = _param.getRootRef,\n    _param_withBorder = _param.withBorder,\n    withBorder = _param_withBorder === void 0 ? true : _param_withBorder,\n    fallbackIconProp = _param[\"fallbackIcon\"],\n    children = _param.children,\n    ariaLabel = _param[\"aria-label\"],\n    onClick = _param.onClick,\n    onLoad = _param.onLoad,\n    onError = _param.onError,\n    restProps = _object_without_properties(_param, [\"alt\", \"crossOrigin\", \"decoding\", \"loading\", \"referrerPolicy\", \"sizes\", \"src\", \"srcSet\", \"useMap\", \"getRef\", \"size\", \"width\", \"height\", \"style\", \"className\", \"getRootRef\", \"withBorder\", \"fallbackIcon\", \"children\", \"aria-label\", \"onClick\", \"onLoad\", \"onError\"]);\n  var _React_useState = _sliced_to_array(React.useState(false), 2),\n    loaded = _React_useState[0],\n    setLoaded = _React_useState[1];\n  var _React_useState1 = _sliced_to_array(React.useState(false), 2),\n    failed = _React_useState1[0],\n    setFailed = _React_useState1[1];\n  var hasSrc = src || srcSet;\n  var needShowFallbackIcon = (failed || !hasSrc) && /*#__PURE__*/React.isValidElement(fallbackIconProp);\n  var fallbackIcon = needShowFallbackIcon ? fallbackIconProp : null;\n  if (process.env.NODE_ENV === \"development\") {\n    validateSize(size);\n    if (fallbackIcon) {\n      validateFallbackIcon(size, {\n        name: \"fallbackIcon\",\n        value: fallbackIcon\n      });\n    }\n  }\n  var handleImageLoad = function (event) {\n    var _onLoad;\n    setLoaded(true);\n    setFailed(false);\n    (_onLoad = onLoad) === null || _onLoad === void 0 ? void 0 : _onLoad(event);\n  };\n  var handleImageError = function (event) {\n    var _onError;\n    setLoaded(false);\n    setFailed(true);\n    (_onError = onError) === null || _onError === void 0 ? void 0 : _onError(event);\n  };\n  var sizeClassName = function () {\n    switch (size) {\n      case 28:\n        return \"vkuiImageBase--size-28\";\n      case 32:\n        return \"vkuiImageBase--size-32\";\n      case 40:\n        return \"vkuiImageBase--size-40\";\n      case 48:\n        return \"vkuiImageBase--size-48\";\n      case 72:\n        return \"vkuiImageBase--size-72\";\n    }\n    return null;\n  }();\n  return /*#__PURE__*/React.createElement(ImageBaseContext.Provider, {\n    value: {\n      size: size\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", _object_spread_props(_object_spread({}, restProps), {\n    ref: getRootRef,\n    style: _object_spread_props(_object_spread({}, style), {\n      width: size,\n      height: size\n    }),\n    className: classNames(className, \"vkuiImageBase\", sizeClassName, loaded && \"vkuiImageBase--loaded\"),\n    role: hasSrc ? \"img\" : \"presentation\",\n    \"aria-label\": ariaLabel,\n    onClick: onClick\n  }), hasSrc && /*#__PURE__*/React.createElement(\"img\", {\n    ref: getRef,\n    alt: alt,\n    className: \"vkuiImageBase__img\",\n    crossOrigin: crossOrigin,\n    decoding: decoding,\n    loading: loading,\n    referrerPolicy: referrerPolicy,\n    sizes: sizes,\n    src: src,\n    srcSet: srcSet,\n    useMap: useMap,\n    width: width,\n    height: height,\n    onLoad: handleImageLoad,\n    onError: handleImageError\n  }), fallbackIcon && /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"vkuiImageBase__fallback\")\n  }, fallbackIcon), children, withBorder && /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-hidden\": true,\n    className: \"vkuiImageBase__border\"\n  })));\n};\nImageBase.Badge = ImageBaseBadge;\nImageBase.Overlay = ImageBaseOverlay;","map":{"version":3,"names":["React","classNames","ImageBaseBadge","ImageBaseOverlay","ImageBaseContext","validateFallbackIcon","validateSize","getBadgeIconSizeByImageBaseSize","getFallbackIconSizeByImageBaseSize","getOverlayIconSizeByImageBaseSize","ImageBase","_param","alt","crossOrigin","decoding","loading","referrerPolicy","sizes","src","srcSet","useMap","getRef","_param_size","size","width","height","style","className","getRootRef","_param_withBorder","withBorder","fallbackIconProp","children","ariaLabel","onClick","onLoad","onError","restProps","_object_without_properties","_React_useState","_sliced_to_array","useState","loaded","setLoaded","_React_useState1","failed","setFailed","hasSrc","needShowFallbackIcon","isValidElement","fallbackIcon","process","env","NODE_ENV","name","value","handleImageLoad","event","_onLoad","handleImageError","_onError","sizeClassName","createElement","Provider","_object_spread_props","_object_spread","ref","role","Badge","Overlay"],"sources":["/Users/evgeny/Desktop/VsCodeProjects/vk-client/vk-client/node_modules/@vkontakte/vkui/src/components/ImageBase/ImageBase.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport type { HasRef, HasRootRef, LiteralUnion } from '../../types';\nimport { ImageBaseBadge, type ImageBaseBadgeProps } from './ImageBaseBadge/ImageBaseBadge';\nimport { ImageBaseOverlay, type ImageBaseOverlayProps } from './ImageBaseOverlay/ImageBaseOverlay';\nimport { ImageBaseContext } from './context';\nimport type { ImageBaseContextProps, ImageBaseExpectedIconProps, ImageBaseSize } from './types';\nimport { validateFallbackIcon, validateSize } from './validators';\nimport styles from './ImageBase.module.css';\n\nexport type {\n  ImageBaseSize,\n  ImageBaseExpectedIconProps,\n  ImageBaseBadgeProps,\n  ImageBaseOverlayProps,\n  ImageBaseContextProps,\n};\n\nexport {\n  getBadgeIconSizeByImageBaseSize,\n  getFallbackIconSizeByImageBaseSize,\n  getOverlayIconSizeByImageBaseSize,\n} from './helpers';\n\nexport { ImageBaseContext };\n\nexport interface ImageBaseProps\n  extends React.ImgHTMLAttributes<HTMLElement>,\n    HasRootRef<HTMLDivElement>,\n    HasRef<HTMLImageElement> {\n  /**\n   * –ó–∞–¥–∞—ë—Ç —Ä–∞–∑–º–µ—Ä –∫–∞—Ä—Ç–∏–Ω–∫–∏.\n   *\n   * –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–º–µ—Ä—ã –∑–∞–¥–∞–Ω–Ω—ã–µ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–æ–π `16 | 20 | 24 | 28 | 32 | 36 | 40 | 44 | 48 | 56 | 64 | 72 | 80 | 88 | 96`.\n   *\n   * > ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ ‚Äì —ç—Ç–æ –ø–æ–≥—Ä–∞–Ω–∏—á–Ω—ã–π –∫–µ–π—Å.\n   */\n  size?: LiteralUnion<ImageBaseSize, number>;\n  /**\n   * –í–∫–ª—é—á–∞–µ—Ç –∏–ª–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç –æ–±–≤–æ–¥–∫—É.\n   */\n  withBorder?: boolean;\n  /**\n   * –§–æ–ª–±–µ–∫ –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –ø—Ä–æ–≥—Ä—É–∑–∏–ª–∞—Å—å.\n   *\n   * > üìù –ù—É–∂–Ω—ã–π –¥–ª—è `<ImageBase size={...} />` —Ä–∞–∑–º–µ—Ä –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ `getFallbackIconSizeByImageBaseSize()`.\n   *\n   * > –ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∫–æ–Ω–∫–∏ –∏–∑ `@vkontakte/icons`.\n   *\n   * > üìäÔ∏è –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É—é –∏–∫–æ–Ω–∫—É, —Ç–æ —Å–ª–µ–¥—É–µ—Ç –∏–º–µ–Ω–æ–≤–∞—Ç—å –µ—ë –ø–æ —à–∞–±–ª–æ–Ω—É `Icon<size><name>`. –ò–ª–∏ –∂–µ\n   * > —á—Ç–æ–±—ã –≤ –Ω–µ—ë –±—ã–ª –ø–µ—Ä–µ–¥–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `width`. –¢–æ–≥–¥–∞ –º—ã —Å–º–æ–∂–µ–º –≤—ã–≤–æ–¥–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å –ø–æ–¥—Å–∫–∞–∑–∫—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ª–∏ —Ä–∞–∑–º–µ—Ä–∞ –≤—ã\n   * > –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –∏–∫–æ–Ω–∫—É.\n   *\n   * > ‚ö†Ô∏è –ú–æ–∂–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—Ç—å `children`.\n   */\n  fallbackIcon?: React.ReactElement<ImageBaseExpectedIconProps>;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ImageBase\n */\nexport const ImageBase = ({\n  alt,\n  crossOrigin,\n  decoding,\n  loading,\n  referrerPolicy,\n  sizes,\n  src,\n  srcSet,\n  useMap,\n  getRef,\n  size = 24,\n  width,\n  height,\n  style,\n  className,\n  getRootRef,\n  withBorder = true,\n  'fallbackIcon': fallbackIconProp,\n  children,\n  'aria-label': ariaLabel,\n  onClick,\n  onLoad,\n  onError,\n  ...restProps\n}: ImageBaseProps) => {\n  const [loaded, setLoaded] = React.useState(false);\n  const [failed, setFailed] = React.useState(false);\n\n  const hasSrc = src || srcSet;\n  const needShowFallbackIcon = (failed || !hasSrc) && React.isValidElement(fallbackIconProp);\n\n  const fallbackIcon = needShowFallbackIcon ? fallbackIconProp : null;\n\n  if (process.env.NODE_ENV === 'development') {\n    validateSize(size);\n    if (fallbackIcon) {\n      validateFallbackIcon(size, { name: 'fallbackIcon', value: fallbackIcon });\n    }\n  }\n\n  const handleImageLoad = (event: React.SyntheticEvent<HTMLImageElement>) => {\n    setLoaded(true);\n    setFailed(false);\n    onLoad?.(event);\n  };\n\n  const handleImageError = (event: React.SyntheticEvent<HTMLImageElement>) => {\n    setLoaded(false);\n    setFailed(true);\n    onError?.(event);\n  };\n\n  const sizeClassName = (() => {\n    switch (size) {\n      case 28:\n        return styles['ImageBase--size-28'];\n      case 32:\n        return styles['ImageBase--size-32'];\n      case 40:\n        return styles['ImageBase--size-40'];\n      case 48:\n        return styles['ImageBase--size-48'];\n      case 72:\n        return styles['ImageBase--size-72'];\n    }\n\n    return null;\n  })();\n\n  return (\n    <ImageBaseContext.Provider value={{ size }}>\n      <div\n        {...restProps}\n        ref={getRootRef}\n        style={{ ...style, width: size, height: size }}\n        className={classNames(\n          className,\n          styles['ImageBase'],\n          sizeClassName,\n          loaded && styles['ImageBase--loaded'],\n        )}\n        role={hasSrc ? 'img' : 'presentation'}\n        aria-label={ariaLabel}\n        onClick={onClick}\n      >\n        {hasSrc && (\n          <img\n            ref={getRef}\n            alt={alt}\n            className={styles['ImageBase__img']}\n            crossOrigin={crossOrigin}\n            decoding={decoding}\n            loading={loading}\n            referrerPolicy={referrerPolicy}\n            sizes={sizes}\n            src={src}\n            srcSet={srcSet}\n            useMap={useMap}\n            width={width}\n            height={height}\n            onLoad={handleImageLoad}\n            onError={handleImageError}\n          />\n        )}\n        {fallbackIcon && (\n          <div className={classNames(styles['ImageBase__fallback'])}>{fallbackIcon}</div>\n        )}\n        {children}\n        {withBorder && <div aria-hidden className={styles['ImageBase__border']} />}\n      </div>\n    </ImageBaseContext.Provider>\n  );\n};\n\nImageBase.Badge = ImageBaseBadge;\n\nImageBase.Overlay = ImageBaseOverlay;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}