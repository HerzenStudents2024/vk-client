{"ast":null,"code":"import { Platform } from \"../platform\";\nimport { SizeType, VIEW_WIDTH_TO_CSS_BREAKPOINT_MAP, ViewHeight, ViewWidth } from \"./constants\";\nexport function getViewWidthByMediaQueries(mediaQueries) {\n  /* eslint-disable no-restricted-properties */if (mediaQueries.desktopPlus.matches) {\n    return ViewWidth.DESKTOP;\n  }\n  if (mediaQueries.tablet.matches) {\n    return ViewWidth.TABLET;\n  }\n  if (mediaQueries.smallTablet.matches) {\n    return ViewWidth.SMALL_TABLET;\n  }\n  if (mediaQueries.mobile.matches) {\n    return ViewWidth.MOBILE;\n  }\n  /* eslint-enable no-restricted-properties */\n  return ViewWidth.SMALL_MOBILE;\n}\nexport function getViewHeightByMediaQueries(mediaQueries) {\n  /* eslint-disable no-restricted-properties */if (mediaQueries.mediumHeight.matches) {\n    return ViewHeight.MEDIUM;\n  }\n  if (mediaQueries.mobileLandscapeHeight.matches) {\n    return ViewHeight.SMALL;\n  }\n  /* eslint-enable no-restricted-properties */\n  return ViewHeight.EXTRA_SMALL;\n}\nexport function getSizeX(viewWidth) {\n  return viewWidth <= ViewWidth.MOBILE ? SizeType.COMPACT : SizeType.REGULAR;\n}\nexport function getSizeY(viewWidth, viewHeight, hasPointer) {\n  if (viewWidth >= ViewWidth.SMALL_TABLET && hasPointer || viewHeight <= ViewHeight.EXTRA_SMALL) {\n    return SizeType.COMPACT;\n  }\n  return SizeType.REGULAR;\n}\nexport function tryToCheckIsDesktop(viewWidth, viewHeight, hasPointer, platform) {\n  // см. https://github.com/VKCOM/VKUI/pull/2473\n  var IS_VKCOM_CRUTCH = platform === Platform.VKCOM;\n  if ((viewWidth === undefined || hasPointer === undefined) && (viewWidth === undefined || viewHeight === undefined) || hasPointer === undefined && viewHeight === undefined) {\n    return IS_VKCOM_CRUTCH ? true : null;\n  }\n  var widthIsLikeDesktop = viewWidth >= ViewWidth.SMALL_TABLET;\n  var otherParametersIsLikeDesktop = hasPointer || (viewHeight !== undefined ? viewHeight >= ViewHeight.MEDIUM : false);\n  return widthIsLikeDesktop && otherParametersIsLikeDesktop || IS_VKCOM_CRUTCH;\n}\n/**\n * Конвертирует `viewWidth` в CSS брейкпоинты (см. тесты для наглядности).\n *\n * > Note: используется восклицательный знак (!), чтобы принудить TS поверить, что св-во точно не может быть\n * > `undefined`. Это всё из-за применения `Partial<...>` для объекта.\n */\nexport function viewWidthToClassName(breakpointClassNames) {\n  var viewWidth = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : \"none\";\n  if (viewWidth === \"none\") {\n    return breakpointClassNames.hasOwnProperty(\"none\") ? breakpointClassNames[\"none\"] : null;\n  }\n  var breakpoints = [];\n  var breakpointName = VIEW_WIDTH_TO_CSS_BREAKPOINT_MAP[viewWidth];\n  if (breakpointClassNames.hasOwnProperty(breakpointName)) {\n    breakpoints.push(breakpointClassNames[breakpointName]);\n  }\n  if (viewWidth >= ViewWidth.MOBILE) {\n    if (breakpointClassNames.hasOwnProperty(\"mobilePlus\")) {\n      breakpoints.push(breakpointClassNames[\"mobilePlus\"]);\n    }\n  }\n  if (viewWidth >= ViewWidth.SMALL_TABLET) {\n    if (breakpointClassNames.hasOwnProperty(\"smallTabletPlus\")) {\n      breakpoints.push(breakpointClassNames[\"smallTabletPlus\"]);\n    }\n  } else {\n    if (breakpointClassNames.hasOwnProperty(\"smallTabletMinus\")) {\n      breakpoints.push(breakpointClassNames[\"smallTabletMinus\"]);\n    }\n  }\n  if (viewWidth >= ViewWidth.TABLET) {\n    if (breakpointClassNames.hasOwnProperty(\"tabletPlus\")) {\n      breakpoints.push(breakpointClassNames[\"tabletPlus\"]);\n    }\n  } else {\n    if (breakpointClassNames.hasOwnProperty(\"tabletMinus\")) {\n      breakpoints.push(breakpointClassNames[\"tabletMinus\"]);\n    }\n  }\n  return breakpoints.length > 0 ? breakpoints.join(\" \") : null;\n}","map":{"version":3,"names":["Platform","SizeType","VIEW_WIDTH_TO_CSS_BREAKPOINT_MAP","ViewHeight","ViewWidth","getViewWidthByMediaQueries","mediaQueries","desktopPlus","matches","DESKTOP","tablet","TABLET","smallTablet","SMALL_TABLET","mobile","MOBILE","SMALL_MOBILE","getViewHeightByMediaQueries","mediumHeight","MEDIUM","mobileLandscapeHeight","SMALL","EXTRA_SMALL","getSizeX","viewWidth","COMPACT","REGULAR","getSizeY","viewHeight","hasPointer","tryToCheckIsDesktop","platform","IS_VKCOM_CRUTCH","VKCOM","undefined","widthIsLikeDesktop","otherParametersIsLikeDesktop","viewWidthToClassName","breakpointClassNames","arguments","length","hasOwnProperty","breakpoints","breakpointName","push","join"],"sources":["/Users/evgeny/Desktop/VsCodeProjects/vk-client/vk-client/node_modules/@vkontakte/vkui/src/lib/adaptivity/functions.ts"],"sourcesContent":["import type { Exact } from '../../types';\nimport { Platform, type PlatformType } from '../platform';\nimport { SizeType, VIEW_WIDTH_TO_CSS_BREAKPOINT_MAP, ViewHeight, ViewWidth } from './constants';\nimport type { CSSBreakpointsClassNames, MediaQueries } from './types';\n\nexport function getViewWidthByMediaQueries(mediaQueries: MediaQueries): ViewWidth {\n  /* eslint-disable no-restricted-properties */\n  if (mediaQueries.desktopPlus.matches) {\n    return ViewWidth.DESKTOP;\n  }\n  if (mediaQueries.tablet.matches) {\n    return ViewWidth.TABLET;\n  }\n  if (mediaQueries.smallTablet.matches) {\n    return ViewWidth.SMALL_TABLET;\n  }\n  if (mediaQueries.mobile.matches) {\n    return ViewWidth.MOBILE;\n  }\n  /* eslint-enable no-restricted-properties */\n  return ViewWidth.SMALL_MOBILE;\n}\n\nexport function getViewHeightByMediaQueries(mediaQueries: MediaQueries): ViewHeight {\n  /* eslint-disable no-restricted-properties */\n  if (mediaQueries.mediumHeight.matches) {\n    return ViewHeight.MEDIUM;\n  }\n  if (mediaQueries.mobileLandscapeHeight.matches) {\n    return ViewHeight.SMALL;\n  }\n  /* eslint-enable no-restricted-properties */\n  return ViewHeight.EXTRA_SMALL;\n}\n\nexport function getSizeX(viewWidth: ViewWidth): SizeType {\n  return viewWidth <= ViewWidth.MOBILE ? SizeType.COMPACT : SizeType.REGULAR;\n}\n\nexport function getSizeY(\n  viewWidth: ViewWidth,\n  viewHeight: ViewHeight,\n  hasPointer: boolean,\n): SizeType {\n  if ((viewWidth >= ViewWidth.SMALL_TABLET && hasPointer) || viewHeight <= ViewHeight.EXTRA_SMALL) {\n    return SizeType.COMPACT;\n  }\n  return SizeType.REGULAR;\n}\n\n/**\n * Проверка на Desktop.\n *\n * Функция гарантировано вернёт `boolean` или `null` в зависимости от условий.\n *\n * Возвращаем `null` в случае, если у нас недостаточно данных, чтобы определить платформу.\n *\n * ⚠️ При передаче Platform.VKCOM всегда будет возвращать `true`.\n */\nexport function tryToCheckIsDesktop(viewWidth: ViewWidth, viewHeight: ViewHeight, hasPointer: undefined | boolean, platform?: PlatformType): boolean; // prettier-ignore\nexport function tryToCheckIsDesktop(viewWidth: ViewWidth, viewHeight: undefined, hasPointer: boolean, platform?: PlatformType): boolean; // prettier-ignore\nexport function tryToCheckIsDesktop(viewWidth: undefined | ViewWidth, viewHeight: undefined, hasPointer: undefined, platform?: PlatformType): null; // prettier-ignore\nexport function tryToCheckIsDesktop(viewWidth: undefined, viewHeight: undefined | ViewHeight, hasPointer: undefined, platform?: PlatformType): null; // prettier-ignore\nexport function tryToCheckIsDesktop(viewWidth: undefined, viewHeight: undefined, hasPointer: undefined | boolean, platform?: PlatformType): null; // prettier-ignore\nexport function tryToCheckIsDesktop(viewWidth: undefined | ViewWidth, viewHeight: undefined | ViewHeight, hasPointer: undefined | boolean, platform?: PlatformType): null | boolean; // prettier-ignore\nexport function tryToCheckIsDesktop(\n  viewWidth: undefined | ViewWidth,\n  viewHeight: undefined | ViewHeight,\n  hasPointer: undefined | boolean,\n  platform?: PlatformType,\n): null | boolean {\n  // см. https://github.com/VKCOM/VKUI/pull/2473\n  const IS_VKCOM_CRUTCH = platform === Platform.VKCOM;\n\n  if (\n    ((viewWidth === undefined || hasPointer === undefined) &&\n      (viewWidth === undefined || viewHeight === undefined)) ||\n    (hasPointer === undefined && viewHeight === undefined)\n  ) {\n    return IS_VKCOM_CRUTCH ? true : null;\n  }\n\n  const widthIsLikeDesktop = viewWidth >= ViewWidth.SMALL_TABLET;\n  const otherParametersIsLikeDesktop =\n    hasPointer || (viewHeight !== undefined ? viewHeight >= ViewHeight.MEDIUM : false);\n\n  return (widthIsLikeDesktop && otherParametersIsLikeDesktop) || IS_VKCOM_CRUTCH;\n}\n\n/**\n * Конвертирует `viewWidth` в CSS брейкпоинты (см. тесты для наглядности).\n *\n * > Note: используется восклицательный знак (!), чтобы принудить TS поверить, что св-во точно не может быть\n * > `undefined`. Это всё из-за применения `Partial<...>` для объекта.\n */\nexport function viewWidthToClassName<T extends Partial<CSSBreakpointsClassNames>>(\n  breakpointClassNames: Exact<CSSBreakpointsClassNames, T>,\n  viewWidth: ViewWidth | 'none' = 'none',\n): string | null {\n  if (viewWidth === 'none') {\n    return breakpointClassNames.hasOwnProperty('none') ? breakpointClassNames['none']! : null;\n  }\n\n  const breakpoints: string[] = [];\n  const breakpointName = VIEW_WIDTH_TO_CSS_BREAKPOINT_MAP[viewWidth];\n\n  if (breakpointClassNames.hasOwnProperty(breakpointName)) {\n    breakpoints.push(breakpointClassNames[breakpointName]!);\n  }\n\n  if (viewWidth >= ViewWidth.MOBILE) {\n    if (breakpointClassNames.hasOwnProperty('mobilePlus')) {\n      breakpoints.push(breakpointClassNames['mobilePlus']!);\n    }\n  }\n\n  if (viewWidth >= ViewWidth.SMALL_TABLET) {\n    if (breakpointClassNames.hasOwnProperty('smallTabletPlus')) {\n      breakpoints.push(breakpointClassNames['smallTabletPlus']!);\n    }\n  } else {\n    if (breakpointClassNames.hasOwnProperty('smallTabletMinus')) {\n      breakpoints.push(breakpointClassNames['smallTabletMinus']!);\n    }\n  }\n\n  if (viewWidth >= ViewWidth.TABLET) {\n    if (breakpointClassNames.hasOwnProperty('tabletPlus')) {\n      breakpoints.push(breakpointClassNames['tabletPlus']!);\n    }\n  } else {\n    if (breakpointClassNames.hasOwnProperty('tabletMinus')) {\n      breakpoints.push(breakpointClassNames['tabletMinus']!);\n    }\n  }\n\n  return breakpoints.length > 0 ? breakpoints.join(' ') : null;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}