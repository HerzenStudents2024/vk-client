{"ast":null,"code":"import { canUseDOM } from \"./dom\";\nexport function animate(param) {\n  var duration = param.duration,\n    timing = param.timing,\n    draw = param.draw;\n  if (!canUseDOM) {\n    return;\n  }\n  var start = performance.now();\n  requestAnimationFrame(function animate(time) {\n    var timeFraction = (time - start) / duration;\n    if (timeFraction > 1) {\n      timeFraction = 1;\n    }\n    var progress = timing(timeFraction);\n    draw(progress);\n    if (timeFraction < 1) {\n      requestAnimationFrame(animate);\n    }\n  });\n}","map":{"version":3,"names":["canUseDOM","animate","param","duration","timing","draw","start","performance","now","requestAnimationFrame","time","timeFraction","progress"],"sources":["/Users/evgeny/Desktop/VsCodeProjects/vk-client/vk-client/node_modules/@vkontakte/vkui/src/lib/animate.ts"],"sourcesContent":["import { canUseDOM } from './dom';\n\n/**\n * Функция для js анимации\n * @param {number} duration\n * @param {function} timing тайминг функция анимации\n * @param {function} draw коллбэк, в который прокидывается прогресс [0, 1]\n * @returns {void}\n */\nexport type TimingInterface = (timeFraction: number) => number;\n\nexport type DrawInterface = (progress: number) => void;\n\nexport interface AnimateArgumentsInterface {\n  duration: number;\n  timing: TimingInterface;\n  draw: DrawInterface;\n}\n\nexport function animate({ duration, timing, draw }: AnimateArgumentsInterface): void {\n  if (!canUseDOM) {\n    return;\n  }\n\n  const start = performance.now();\n\n  requestAnimationFrame(function animate(time: number): void {\n    let timeFraction = (time - start) / duration;\n\n    if (timeFraction > 1) {\n      timeFraction = 1;\n    }\n\n    const progress = timing(timeFraction);\n\n    draw(progress);\n\n    if (timeFraction < 1) {\n      requestAnimationFrame(animate);\n    }\n  });\n}\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ;AAmB1B,OAAO,SAASC,QAAQC,KAAqD;MAAnDC,QAAA,GAAFD,KAAA,CAAEC,QAAA;IAAUC,MAAA,GAAZF,KAAA,CAAYE,MAAA;IAAQC,IAAA,GAApBH,KAAA,CAAoBG,IAAA;EAC1C,IAAI,CAACL,SAAA,EAAW;IACd;EACF;EAEA,IAAMM,KAAA,GAAQC,WAAA,CAAYC,GAAG;EAE7BC,qBAAA,CAAsB,SAASR,QAAQS,IAAY;IACjD,IAAIC,YAAA,GAAe,CAACD,IAAA,GAAOJ,KAAI,IAAKH,QAAA;IAEpC,IAAIQ,YAAA,GAAe,GAAG;MACpBA,YAAA,GAAe;IACjB;IAEA,IAAMC,QAAA,GAAWR,MAAA,CAAOO,YAAA;IAExBN,IAAA,CAAKO,QAAA;IAEL,IAAID,YAAA,GAAe,GAAG;MACpBF,qBAAA,CAAsBR,OAAA;IACxB;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}