{"ast":null,"code":"import * as React from \"react\";\nimport { noop } from \"@vkontakte/vkjs\";\nimport { useDOM } from \"../lib/dom\";\nimport { transitionEvent } from \"../lib/supportEvents\";\nexport var useWaitTransitionFinish = function () {\n  var timeoutRef = React.useRef(null);\n  var document = useDOM().document;\n  var detach = React.useRef(noop);\n  var remove = React.useCallback(function () {\n    detach.current();\n    detach.current = noop;\n  }, []);\n  var waitTransitionFinish = React.useCallback(function (element, eventHandler, durationFallback) {\n    if (element) {\n      var _document;\n      if (!((_document = document) === null || _document === void 0 ? void 0 : _document.hidden) && transitionEvent.supported && transitionEvent.name) {\n        remove();\n        element.addEventListener(transitionEvent.name, eventHandler);\n        detach.current = function () {\n          if (transitionEvent.name) {\n            element.removeEventListener(transitionEvent.name, eventHandler);\n          }\n        };\n      } else {\n        var _timeoutRef;\n        if ((_timeoutRef = timeoutRef) === null || _timeoutRef === void 0 ? void 0 : _timeoutRef.current) {\n          clearTimeout(timeoutRef.current);\n        }\n        timeoutRef.current = setTimeout(eventHandler, durationFallback);\n      }\n    }\n  }, [document, remove, timeoutRef]);\n  return {\n    waitTransitionFinish: waitTransitionFinish\n  };\n};","map":{"version":3,"names":["React","noop","useDOM","transitionEvent","useWaitTransitionFinish","timeoutRef","useRef","document","detach","remove","useCallback","current","waitTransitionFinish","element","eventHandler","durationFallback","_document","hidden","supported","name","addEventListener","removeEventListener","_timeoutRef","clearTimeout","setTimeout"],"sources":["/Users/evgeny/Desktop/VsCodeProjects/vk-client/vk-client/node_modules/@vkontakte/vkui/src/hooks/useWaitTransitionFinish.ts"],"sourcesContent":["import * as React from 'react';\nimport { noop } from '@vkontakte/vkjs';\nimport { useDOM } from '../lib/dom';\nimport { transitionEvent } from '../lib/supportEvents';\n\nexport const useWaitTransitionFinish = () => {\n  const timeoutRef = React.useRef<ReturnType<typeof setTimeout> | null>(null);\n  const { document } = useDOM();\n  const detach = React.useRef(noop);\n\n  const remove = React.useCallback(() => {\n    detach.current();\n    detach.current = noop;\n  }, []);\n\n  const waitTransitionFinish = React.useCallback(\n    (\n      element: HTMLElement | undefined | null,\n      eventHandler: VoidFunction,\n      durationFallback: number,\n    ) => {\n      if (element) {\n        if (!document?.hidden && transitionEvent.supported && transitionEvent.name) {\n          remove();\n          element.addEventListener(transitionEvent.name, eventHandler);\n          detach.current = () => {\n            if (transitionEvent.name) {\n              element.removeEventListener(transitionEvent.name, eventHandler);\n            }\n          };\n        } else {\n          if (timeoutRef?.current) {\n            clearTimeout(timeoutRef.current);\n          }\n          timeoutRef.current = setTimeout(eventHandler, durationFallback);\n        }\n      }\n    },\n    [document, remove, timeoutRef],\n  );\n\n  return {\n    waitTransitionFinish,\n  };\n};\n"],"mappings":"AAAA,YAAYA,KAAA,MAAW;AACvB,SAASC,IAAI,QAAQ;AACrB,SAASC,MAAM,QAAQ;AACvB,SAASC,eAAe,QAAQ;AAEhC,OAAO,IAAMC,uBAAA,GAA0B,SAAAA,CAAA;EACrC,IAAMC,UAAA,GAAaL,KAAA,CAAMM,MAAM,CAAuC;EACtE,IAAMC,QAAE,GAAaL,MAAA,GAAbK,QAAA;EACR,IAAMC,MAAA,GAASR,KAAA,CAAMM,MAAM,CAACL,IAAA;EAE5B,IAAMQ,MAAA,GAAST,KAAA,CAAMU,WAAW,CAAC;IAC/BF,MAAA,CAAOG,OAAO;IACdH,MAAA,CAAOG,OAAO,GAAGV,IAAA;EACnB,GAAG,EAAE;EAEL,IAAMW,oBAAA,GAAuBZ,KAAA,CAAMU,WAAW,CAC5C,UACEG,OAAA,EACAC,YAAA,EACAC,gBAAA;IAEA,IAAIF,OAAA,EAAS;UACNG,SAAA;MAAL,IAAI,GAACA,SAAA,GAAAT,QAAA,cAAAS,SAAA,uBAAAA,SAAA,CAAUC,MAAM,KAAId,eAAA,CAAgBe,SAAS,IAAIf,eAAA,CAAgBgB,IAAI,EAAE;QAC1EV,MAAA;QACAI,OAAA,CAAQO,gBAAgB,CAACjB,eAAA,CAAgBgB,IAAI,EAAEL,YAAA;QAC/CN,MAAA,CAAOG,OAAO,GAAG;UACf,IAAIR,eAAA,CAAgBgB,IAAI,EAAE;YACxBN,OAAA,CAAQQ,mBAAmB,CAAClB,eAAA,CAAgBgB,IAAI,EAAEL,YAAA;UACpD;QACF;MACF,OAAO;YACDQ,WAAA;QAAJ,KAAIA,WAAA,GAAAjB,UAAA,cAAAiB,WAAA,uBAAAA,WAAA,CAAYX,OAAO,EAAE;UACvBY,YAAA,CAAalB,UAAA,CAAWM,OAAO;QACjC;QACAN,UAAA,CAAWM,OAAO,GAAGa,UAAA,CAAWV,YAAA,EAAcC,gBAAA;MAChD;IACF;EACF,GACA,CAACR,QAAA,EAAUE,MAAA,EAAQJ,UAAA,CAAW;EAGhC,OAAO;IACLO,oBAAA,EAAAA;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}