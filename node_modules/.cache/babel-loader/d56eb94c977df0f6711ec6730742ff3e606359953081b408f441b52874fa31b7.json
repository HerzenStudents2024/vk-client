{"ast":null,"code":"import { _ as _sliced_to_array } from \"@swc/helpers/_/_sliced_to_array\";\nimport * as React from \"react\";\nimport { noop } from \"@vkontakte/vkjs\";\nimport { clamp } from \"../../helpers/math\";\nimport { useDOM } from \"../../lib/dom\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nvar clearDisableScrollStyle = function (node) {\n  Object.assign(node.style, {\n    position: \"\",\n    top: \"\",\n    left: \"\",\n    right: \"\",\n    overflowY: \"\",\n    overflowX: \"\"\n  });\n};\nvar getPageYOffsetWithoutKeyboardHeight = function (window) {\n  // Note: здесь расчёт на то, что `clientHeight` равен `window.innerHeight`.\n  //  Это достигается тем, что тегу `html` задали`height: 100%` и у него нет отступов сверху и снизу. Если есть отступы,\n  //  то надо задать `box-sizing: border-box`, чтобы они не учитывались.\n  var diffOfClientHeightAndViewportHeight = window.document.documentElement.clientHeight - window.innerHeight;\n  return window.pageYOffset - diffOfClientHeightAndViewportHeight;\n};\nexport var ScrollContext = /*#__PURE__*/React.createContext({\n  getScroll: function () {\n    return {\n      x: 0,\n      y: 0\n    };\n  },\n  scrollTo: noop,\n  isScrollLock: false,\n  enableScrollLock: noop,\n  disableScrollLock: noop\n});\nexport var useScroll = function () {\n  return React.useContext(ScrollContext);\n};\nexport var GlobalScrollController = function (param) {\n  var children = param.children;\n  var _useDOM = useDOM(),\n    window = _useDOM.window,\n    document = _useDOM.document;\n  var _React_useState = _sliced_to_array(React.useState(false), 2),\n    isScrollLock = _React_useState[0],\n    setScrollLock = _React_useState[1];\n  var beforeScrollLockFnSetRef = React.useRef(new Set());\n  var getScroll = React.useCallback(function () {\n    return {\n      x: window.pageXOffset,\n      y: getPageYOffsetWithoutKeyboardHeight(window)\n    };\n  }, [window]);\n  var scrollTo = React.useCallback(function () {\n    var x = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 0,\n      y = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;\n    // Some iOS versions do not normalize scroll — do it manually.\n    window.scrollTo(x ? clamp(x, 0, document.body.scrollWidth - window.innerWidth) : 0, y ? clamp(y, 0, document.body.scrollHeight - window.innerHeight) : 0);\n  }, [document, window]);\n  var enableScrollLock = React.useCallback(function () {\n    beforeScrollLockFnSetRef.current.forEach(function (fn) {\n      fn();\n    });\n    var scrollY = window.pageYOffset;\n    var scrollX = window.pageXOffset;\n    var overflowY = window.innerWidth > document.documentElement.clientWidth ? \"scroll\" : \"\";\n    var overflowX = window.innerHeight > document.documentElement.clientHeight ? \"scroll\" : \"\";\n    Object.assign(document.body.style, {\n      position: \"fixed\",\n      top: \"-\".concat(scrollY, \"px\"),\n      left: \"-\".concat(scrollX, \"px\"),\n      right: \"0\",\n      overflowY: overflowY,\n      overflowX: overflowX\n    });\n    setScrollLock(true);\n  }, [document, window]);\n  var disableScrollLock = React.useCallback(function () {\n    var scrollY = document.body.style.top;\n    var scrollX = document.body.style.left;\n    clearDisableScrollStyle(document.body);\n    window.scrollTo(-parseInt(scrollX || \"0\"), -parseInt(scrollY || \"0\"));\n    setScrollLock(false);\n  }, [document, window]);\n  var scrollController = React.useMemo(function () {\n    return {\n      getScroll: getScroll,\n      scrollTo: scrollTo,\n      isScrollLock: isScrollLock,\n      disableScrollLock: disableScrollLock,\n      enableScrollLock: enableScrollLock,\n      beforeScrollLockFnSetRef: beforeScrollLockFnSetRef\n    };\n  }, [getScroll, scrollTo, isScrollLock, disableScrollLock, enableScrollLock]);\n  return /*#__PURE__*/React.createElement(ScrollContext.Provider, {\n    value: scrollController\n  }, children);\n};\nexport var ElementScrollController = function (param) {\n  var elRef = param.elRef,\n    children = param.children;\n  var _React_useState = _sliced_to_array(React.useState(false), 2),\n    isScrollLock = _React_useState[0],\n    setScrollLock = _React_useState[1];\n  var beforeScrollLockFnSetRef = React.useRef(new Set());\n  var _elRef_current_scrollLeft, _elRef_current_scrollTop;\n  var getScroll = React.useCallback(function () {\n    var _elRef_current, _elRef_current1;\n    return {\n      x: (_elRef_current_scrollLeft = (_elRef_current = elRef.current) === null || _elRef_current === void 0 ? void 0 : _elRef_current.scrollLeft) !== null && _elRef_current_scrollLeft !== void 0 ? _elRef_current_scrollLeft : 0,\n      y: (_elRef_current_scrollTop = (_elRef_current1 = elRef.current) === null || _elRef_current1 === void 0 ? void 0 : _elRef_current1.scrollTop) !== null && _elRef_current_scrollTop !== void 0 ? _elRef_current_scrollTop : 0\n    };\n  }, [elRef]);\n  var scrollTo = React.useCallback(function () {\n    var x = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 0,\n      y = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;\n    var\n    // Some iOS versions do not normalize scroll — do it manually.\n    _el;\n    var el = elRef.current;\n    (_el = el) === null || _el === void 0 ? void 0 : _el.scrollTo(x ? clamp(x, 0, el.scrollWidth - el.clientWidth) : 0, y ? clamp(y, 0, el.scrollHeight - el.clientHeight) : 0);\n  }, [elRef]);\n  var enableScrollLock = React.useCallback(function () {\n    var el = elRef.current;\n    if (!el) {\n      return;\n    }\n    beforeScrollLockFnSetRef.current.forEach(function (fn) {\n      fn();\n    });\n    var scrollY = el.scrollTop;\n    var scrollX = el.scrollLeft;\n    var overflowY = el.scrollWidth > el.clientWidth ? \"scroll\" : \"\";\n    var overflowX = el.scrollHeight > el.clientHeight ? \"scroll\" : \"\";\n    Object.assign(el.style, {\n      position: \"absolute\",\n      top: \"-\".concat(scrollY, \"px\"),\n      left: \"-\".concat(scrollX, \"px\"),\n      right: \"0\",\n      overflowY: overflowY,\n      overflowX: overflowX\n    });\n    setScrollLock(true);\n  }, [elRef]);\n  var disableScrollLock = React.useCallback(function () {\n    var el = elRef.current;\n    if (!el) {\n      return;\n    }\n    var scrollY = el.style.top;\n    var scrollX = el.style.left;\n    clearDisableScrollStyle(el);\n    el.scrollTo(-parseInt(scrollX || \"0\"), -parseInt(scrollY || \"0\"));\n    setScrollLock(false);\n  }, [elRef]);\n  var scrollController = React.useMemo(function () {\n    return {\n      getScroll: getScroll,\n      scrollTo: scrollTo,\n      isScrollLock: isScrollLock,\n      disableScrollLock: disableScrollLock,\n      enableScrollLock: enableScrollLock,\n      beforeScrollLockFnSetRef: beforeScrollLockFnSetRef\n    };\n  }, [getScroll, scrollTo, isScrollLock, disableScrollLock, enableScrollLock]);\n  return /*#__PURE__*/React.createElement(ScrollContext.Provider, {\n    value: scrollController\n  }, children);\n};\n/**\n * Вызывает функцию effect, до блокировки прокрутки\n * @param effect функция, которая может возвращать функцию очистки\n * @param deps effect обновится только при изменении значений в списке.\n */\nexport var useScrollLockEffect = function (effect, deps) {\n  var destructorRef = React.useRef(noop);\n  var _useScroll = useScroll(),\n    isScrollLock = _useScroll.isScrollLock,\n    beforeScrollLockFnSetRef = _useScroll.beforeScrollLockFnSetRef;\n  // Изменяем effectCallback только при изменении deps\n  var effectCallback = React.useCallback(function () {\n    destructorRef.current = effect();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, deps);\n  // Добавляем effectCallback в список функций, которые необходимо вызвать\n  // до блокировки\n  React.useEffect(function () {\n    var _beforeScrollLockFnSetRef;\n    var beforeSet = (_beforeScrollLockFnSetRef = beforeScrollLockFnSetRef) === null || _beforeScrollLockFnSetRef === void 0 ? void 0 : _beforeScrollLockFnSetRef.current;\n    if (!beforeSet) {\n      return noop;\n    }\n    beforeSet.add(effectCallback);\n    return function () {\n      beforeSet.delete(effectCallback);\n    };\n  }, [beforeScrollLockFnSetRef, effectCallback]);\n  // Вызываем сбрасывающую функцию, после отключения блокировки\n  React.useEffect(function () {\n    if (!isScrollLock && destructorRef.current) {\n      destructorRef.current();\n    }\n  }, [isScrollLock]);\n};\nexport var useScrollLock = function () {\n  var enabled = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;\n  var _useScroll = useScroll(),\n    enableScrollLock = _useScroll.enableScrollLock,\n    disableScrollLock = _useScroll.disableScrollLock;\n  useIsomorphicLayoutEffect(function () {\n    if (enabled) {\n      enableScrollLock();\n      return disableScrollLock;\n    }\n    return noop;\n  }, [enableScrollLock, disableScrollLock, enabled]);\n};","map":{"version":3,"names":["React","noop","clamp","useDOM","useIsomorphicLayoutEffect","clearDisableScrollStyle","node","Object","assign","style","position","top","left","right","overflowY","overflowX","getPageYOffsetWithoutKeyboardHeight","window","diffOfClientHeightAndViewportHeight","document","documentElement","clientHeight","innerHeight","pageYOffset","ScrollContext","createContext","getScroll","x","y","scrollTo","isScrollLock","enableScrollLock","disableScrollLock","useScroll","useContext","GlobalScrollController","param","children","_useDOM","_React_useState","_sliced_to_array","useState","setScrollLock","beforeScrollLockFnSetRef","useRef","Set","useCallback","pageXOffset","arguments","length","body","scrollWidth","innerWidth","scrollHeight","current","forEach","fn","scrollY","scrollX","clientWidth","concat","parseInt","scrollController","useMemo","createElement","Provider","value","ElementScrollController","elRef","_elRef_current_scrollLeft","_elRef_current_scrollTop","_elRef_current","_elRef_current1","scrollLeft","scrollTop","_el","el","useScrollLockEffect","effect","deps","destructorRef","_useScroll","effectCallback","useEffect","_beforeScrollLockFnSetRef","beforeSet","add","delete","useScrollLock","enabled"],"sources":["/Users/evgeny/Desktop/VsCodeProjects/vk-client/vk-client/node_modules/@vkontakte/vkui/src/components/AppRoot/ScrollContext.tsx"],"sourcesContent":["import * as React from 'react';\nimport { noop } from '@vkontakte/vkjs';\nimport { clamp } from '../../helpers/math';\nimport { useDOM } from '../../lib/dom';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { HasChildren } from '../../types';\n\nconst clearDisableScrollStyle = (node: HTMLElement) => {\n  Object.assign(node.style, {\n    position: '',\n    top: '',\n    left: '',\n    right: '',\n    overflowY: '',\n    overflowX: '',\n  });\n};\n\nconst getPageYOffsetWithoutKeyboardHeight = (window: Window) => {\n  // Note: здесь расчёт на то, что `clientHeight` равен `window.innerHeight`.\n  //  Это достигается тем, что тегу `html` задали`height: 100%` и у него нет отступов сверху и снизу. Если есть отступы,\n  //  то надо задать `box-sizing: border-box`, чтобы они не учитывались.\n  const diffOfClientHeightAndViewportHeight =\n    window.document.documentElement.clientHeight - window.innerHeight;\n  return window.pageYOffset - diffOfClientHeightAndViewportHeight;\n};\n\nexport interface ScrollContextInterface {\n  getScroll(this: void): { x: number; y: number };\n  scrollTo(this: void, x?: number, y?: number): void;\n  isScrollLock: boolean;\n  enableScrollLock(this: void): void;\n  disableScrollLock(this: void): void;\n  beforeScrollLockFnSetRef?: React.RefObject<Set<() => void>>;\n}\n\nexport const ScrollContext = React.createContext<ScrollContextInterface>({\n  getScroll: () => ({ x: 0, y: 0 }),\n  scrollTo: noop,\n  isScrollLock: false,\n  enableScrollLock: noop,\n  disableScrollLock: noop,\n});\n\nexport const useScroll = () => React.useContext(ScrollContext);\n\nexport interface ScrollControllerProps extends HasChildren {\n  elRef: React.RefObject<HTMLElement>;\n}\n\nexport const GlobalScrollController = ({ children }: ScrollControllerProps) => {\n  const { window, document } = useDOM();\n  const [isScrollLock, setScrollLock] = React.useState(false);\n  const beforeScrollLockFnSetRef = React.useRef<Set<() => void>>(new Set());\n\n  const getScroll = React.useCallback<ScrollContextInterface['getScroll']>(\n    () => ({\n      x: window!.pageXOffset,\n      y: getPageYOffsetWithoutKeyboardHeight(window!),\n    }),\n    [window],\n  );\n  const scrollTo = React.useCallback<ScrollContextInterface['scrollTo']>(\n    (x = 0, y = 0) => {\n      // Some iOS versions do not normalize scroll — do it manually.\n      window!.scrollTo(\n        x ? clamp(x, 0, document!.body.scrollWidth - window!.innerWidth) : 0,\n        y ? clamp(y, 0, document!.body.scrollHeight - window!.innerHeight) : 0,\n      );\n    },\n    [document, window],\n  );\n\n  const enableScrollLock = React.useCallback<ScrollContextInterface['enableScrollLock']>(() => {\n    beforeScrollLockFnSetRef.current.forEach((fn) => {\n      fn();\n    });\n\n    const scrollY = window!.pageYOffset;\n    const scrollX = window!.pageXOffset;\n    const overflowY = window!.innerWidth > document!.documentElement.clientWidth ? 'scroll' : '';\n    const overflowX = window!.innerHeight > document!.documentElement.clientHeight ? 'scroll' : '';\n\n    Object.assign(document!.body.style, {\n      position: 'fixed',\n      top: `-${scrollY}px`,\n      left: `-${scrollX}px`,\n      right: '0',\n      overflowY,\n      overflowX,\n    });\n    setScrollLock(true);\n  }, [document, window]);\n\n  const disableScrollLock = React.useCallback<ScrollContextInterface['disableScrollLock']>(() => {\n    const scrollY = document!.body.style.top;\n    const scrollX = document!.body.style.left;\n\n    clearDisableScrollStyle(document!.body);\n    window!.scrollTo(-parseInt(scrollX || '0'), -parseInt(scrollY || '0'));\n    setScrollLock(false);\n  }, [document, window]);\n\n  const scrollController = React.useMemo<ScrollContextInterface>(\n    () => ({\n      getScroll,\n      scrollTo,\n      isScrollLock,\n      disableScrollLock,\n      enableScrollLock,\n\n      beforeScrollLockFnSetRef: beforeScrollLockFnSetRef,\n    }),\n    [getScroll, scrollTo, isScrollLock, disableScrollLock, enableScrollLock],\n  );\n\n  return <ScrollContext.Provider value={scrollController}>{children}</ScrollContext.Provider>;\n};\n\nexport const ElementScrollController = ({ elRef, children }: ScrollControllerProps) => {\n  const [isScrollLock, setScrollLock] = React.useState(false);\n  const beforeScrollLockFnSetRef = React.useRef<Set<() => void>>(new Set());\n\n  const getScroll = React.useCallback<ScrollContextInterface['getScroll']>(\n    () => ({\n      x: elRef.current?.scrollLeft ?? 0,\n      y: elRef.current?.scrollTop ?? 0,\n    }),\n    [elRef],\n  );\n  const scrollTo = React.useCallback<ScrollContextInterface['scrollTo']>(\n    (x = 0, y = 0) => {\n      const el = elRef.current;\n      // Some iOS versions do not normalize scroll — do it manually.\n      el?.scrollTo(\n        x ? clamp(x, 0, el.scrollWidth - el.clientWidth) : 0,\n        y ? clamp(y, 0, el.scrollHeight - el.clientHeight) : 0,\n      );\n    },\n    [elRef],\n  );\n\n  const enableScrollLock = React.useCallback<ScrollContextInterface['enableScrollLock']>(() => {\n    const el = elRef.current;\n    if (!el) {\n      return;\n    }\n    beforeScrollLockFnSetRef.current.forEach((fn) => {\n      fn();\n    });\n\n    const scrollY = el.scrollTop;\n    const scrollX = el.scrollLeft;\n    const overflowY = el.scrollWidth > el.clientWidth ? 'scroll' : '';\n    const overflowX = el.scrollHeight > el.clientHeight ? 'scroll' : '';\n\n    Object.assign(el.style, {\n      position: 'absolute',\n      top: `-${scrollY}px`,\n      left: `-${scrollX}px`,\n      right: '0',\n      overflowY,\n      overflowX,\n    });\n    setScrollLock(true);\n  }, [elRef]);\n\n  const disableScrollLock = React.useCallback<ScrollContextInterface['disableScrollLock']>(() => {\n    const el = elRef.current;\n    if (!el) {\n      return;\n    }\n\n    const scrollY = el.style.top;\n    const scrollX = el.style.left;\n\n    clearDisableScrollStyle(el);\n    el.scrollTo(-parseInt(scrollX || '0'), -parseInt(scrollY || '0'));\n    setScrollLock(false);\n  }, [elRef]);\n\n  const scrollController = React.useMemo<ScrollContextInterface>(\n    () => ({\n      getScroll,\n      scrollTo,\n      isScrollLock,\n      disableScrollLock,\n      enableScrollLock,\n      beforeScrollLockFnSetRef,\n    }),\n    [getScroll, scrollTo, isScrollLock, disableScrollLock, enableScrollLock],\n  );\n\n  return <ScrollContext.Provider value={scrollController}>{children}</ScrollContext.Provider>;\n};\n\n/**\n * Вызывает функцию effect, до блокировки прокрутки\n * @param effect функция, которая может возвращать функцию очистки\n * @param deps effect обновится только при изменении значений в списке.\n */\nexport const useScrollLockEffect = (effect: React.EffectCallback, deps: React.DependencyList) => {\n  const destructorRef = React.useRef<ReturnType<React.EffectCallback>>(noop);\n  const { isScrollLock, beforeScrollLockFnSetRef } = useScroll();\n\n  // Изменяем effectCallback только при изменении deps\n  const effectCallback = React.useCallback(() => {\n    destructorRef.current = effect();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, deps);\n\n  // Добавляем effectCallback в список функций, которые необходимо вызвать\n  // до блокировки\n  React.useEffect(() => {\n    const beforeSet = beforeScrollLockFnSetRef?.current;\n    if (!beforeSet) {\n      return noop;\n    }\n\n    beforeSet.add(effectCallback);\n\n    return () => {\n      beforeSet.delete(effectCallback);\n    };\n  }, [beforeScrollLockFnSetRef, effectCallback]);\n\n  // Вызываем сбрасывающую функцию, после отключения блокировки\n  React.useEffect(() => {\n    if (!isScrollLock && destructorRef.current) {\n      destructorRef.current();\n    }\n  }, [isScrollLock]);\n};\n\nexport const useScrollLock = (enabled = true) => {\n  const { enableScrollLock, disableScrollLock } = useScroll();\n  useIsomorphicLayoutEffect(() => {\n    if (enabled) {\n      enableScrollLock();\n      return disableScrollLock;\n    }\n    return noop;\n  }, [enableScrollLock, disableScrollLock, enabled]);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}