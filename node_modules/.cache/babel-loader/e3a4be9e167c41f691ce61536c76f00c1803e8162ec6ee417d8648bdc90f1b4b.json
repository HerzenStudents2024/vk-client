{"ast":null,"code":"import { _ as _object_without_properties } from \"@swc/helpers/_/_object_without_properties\";\nimport * as React from \"react\";\nimport { classNames, noop } from \"@vkontakte/vkjs\";\nimport { clamp } from \"../../helpers/math\";\nimport { useObjectMemo } from \"../../hooks/useObjectMemo\";\nimport { usePrevious } from \"../../hooks/usePrevious\";\nimport { useWaitTransitionFinish } from \"../../hooks/useWaitTransitionFinish\";\nimport { useDOM } from \"../../lib/dom\";\nimport { getNavId } from \"../../lib/getNavId\";\nimport { Platform } from \"../../lib/platform\";\nimport { warnOnce } from \"../../lib/warnOnce\";\nimport { useConfigProvider, WebviewType } from \"../ConfigProvider/ConfigProviderContext\";\nimport { FocusTrap } from \"../FocusTrap/FocusTrap\";\nimport { ModalRootContext } from \"./ModalRootContext\";\nimport { useModalManager } from \"./useModalManager\";\nvar warn = warnOnce(\"ModalRoot\");\nexport var ModalRootDesktop = function (param) {\n  var activeModalProp = param.activeModal,\n    children = param.children,\n    onOpen = param.onOpen,\n    onOpened = param.onOpened,\n    onClose = param.onClose,\n    onClosed = param.onClosed;\n  var maskElementRef = React.useRef(null);\n  var maskAnimationFrame = React.useRef(undefined);\n  var restoreFocusTo = React.useRef(undefined);\n  var document = useDOM().document;\n  var _useConfigProvider = useConfigProvider(),\n    webviewType = _useConfigProvider.webviewType,\n    platform = _useConfigProvider.platform;\n  var _useModalManager = useModalManager(activeModalProp, children, onOpen, onOpened, onClose, onClosed, noop),\n    activeModal = _useModalManager.activeModal,\n    exitingModal = _useModalManager.exitingModal,\n    onExit = _useModalManager.onExit,\n    getModalState = _useModalManager.getModalState,\n    enteringModal = _useModalManager.enteringModal,\n    onEnter = _useModalManager.onEnter,\n    onEntered = _useModalManager.onEntered,\n    onExited = _useModalManager.onExited,\n    history = _useModalManager.history,\n    delayEnter = _useModalManager.delayEnter;\n  var waitTransitionFinish = useWaitTransitionFinish().waitTransitionFinish;\n  var prevProps = usePrevious({\n    exitingModal: exitingModal,\n    enteringModal: enteringModal,\n    activeModal: activeModal\n  });\n  var _getModalState;\n  var modalRootContext = useObjectMemo({\n    updateModalHeight: function () {\n      return undefined;\n    },\n    registerModal: function (_param) {\n      var id = _param.id,\n        data = _object_without_properties(_param, [\"id\"]);\n      return Object.assign((_getModalState = getModalState(id)) !== null && _getModalState !== void 0 ? _getModalState : {}, data);\n    },\n    onClose: onExit,\n    isInsideModal: true\n  });\n  var timeout = platform === Platform.IOS ? 400 : 320;\n  var modals = React.Children.toArray(children);\n  /* Анимирует сдвиг модального окна */\n  var animateModalOpacity = function (modalState, display) {\n    var _modalState;\n    if ((_modalState = modalState) === null || _modalState === void 0 ? void 0 : _modalState.innerElement) {\n      modalState.innerElement.style.transition = \"\";\n      modalState.innerElement.style.transitionDelay = display && delayEnter ? \"\".concat(timeout, \"ms\") : \"\";\n      modalState.innerElement.style.opacity = display ? \"1\" : \"0\";\n    }\n  };\n  /* Устанавливает прозрачность для полупрозрачной подложки */\n  var setMaskOpacity = function (modalState) {\n    var forceOpacity = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;\n    var _history;\n    if (forceOpacity === null && ((_history = history) === null || _history === void 0 ? void 0 : _history[0]) !== modalState.id) {\n      return;\n    }\n    if (maskAnimationFrame.current) {\n      cancelAnimationFrame(maskAnimationFrame.current);\n    }\n    maskAnimationFrame.current = requestAnimationFrame(function () {\n      if (maskElementRef.current) {\n        var _modalState_translateY = modalState.translateY,\n          translateY = _modalState_translateY === void 0 ? 0 : _modalState_translateY,\n          _modalState_translateYCurrent = modalState.translateYCurrent,\n          translateYCurrent = _modalState_translateYCurrent === void 0 ? 0 : _modalState_translateYCurrent;\n        var opacity = forceOpacity === null ? 1 - (translateYCurrent - translateY) / (100 - translateY) || 0 : forceOpacity;\n        maskElementRef.current.style.opacity = clamp(opacity, 0, 100).toString();\n      }\n    });\n  };\n  var openModal = function () {\n    var _enteringState;\n    if (!enteringModal || !prevProps) {\n      return;\n    }\n    var enteringState = getModalState(enteringModal);\n    onEnter();\n    // Анимация открытия модального окна\n    if (!prevProps.exitingModal) {\n      requestAnimationFrame(function () {\n        if (enteringModal === enteringModal) {\n          var _enteringState;\n          waitTransitionFinish((_enteringState = enteringState) === null || _enteringState === void 0 ? void 0 : _enteringState.innerElement, function () {\n            return onEntered(enteringModal);\n          }, timeout);\n          animateModalOpacity(enteringState, true);\n        }\n      });\n      return;\n    }\n    // Переход между модальными окнами без анимации\n    if ((_enteringState = enteringState) === null || _enteringState === void 0 ? void 0 : _enteringState.innerElement) {\n      enteringState.innerElement.style.transition = \"none\";\n      enteringState.innerElement.style.opacity = \"1\";\n    }\n    onEntered(enteringModal);\n  };\n  var closeModal = function (id) {\n    var prevModalState = getModalState(id);\n    if (!prevModalState) {\n      return;\n    }\n    // Анимация закрытия модального окна\n    if (!activeModal) {\n      requestAnimationFrame(function () {\n        var _prevModalState;\n        waitTransitionFinish((_prevModalState = prevModalState) === null || _prevModalState === void 0 ? void 0 : _prevModalState.innerElement, function () {\n          return onExited(id);\n        }, timeout);\n        animateModalOpacity(prevModalState, false);\n        setMaskOpacity(prevModalState, 0);\n      });\n      return;\n    }\n    // Переход между модальными окнами без анимации\n    onExited(id);\n  };\n  React.useEffect(function () {\n    if (!prevProps) {\n      return;\n    }\n    // transition phase 2: animate exiting modal\n    if (exitingModal && exitingModal !== prevProps.exitingModal) {\n      closeModal(exitingModal);\n    }\n    // transition phase 3: animate entering modal\n    if (enteringModal && enteringModal !== prevProps.enteringModal) {\n      openModal();\n    }\n    // focus restoration\n    if (activeModal && !prevProps.activeModal) {\n      var _document;\n      var _document_activeElement;\n      restoreFocusTo.current = (_document_activeElement = (_document = document) === null || _document === void 0 ? void 0 : _document.activeElement) !== null && _document_activeElement !== void 0 ? _document_activeElement : undefined;\n    }\n    if (!activeModal && !exitingModal && restoreFocusTo.current) {\n      restoreFocusTo.current.focus();\n      restoreFocusTo.current = undefined;\n    }\n  });\n  if (!activeModal && !exitingModal) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(ModalRootContext.Provider, {\n    value: modalRootContext\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"vkuiModalRoot\", webviewType === WebviewType.VKAPPS && \"vkuiModalRoot--vkapps\", \"vkuiModalRoot--desktop\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiModalRoot__mask\",\n    ref: maskElementRef,\n    onClick: onExit\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiModalRoot__viewport\"\n  }, modals.map(function (Modal) {\n    var modalId = getNavId(Modal.props, warn);\n    if (modalId !== activeModal && modalId !== exitingModal) {\n      return null;\n    }\n    var key = \"modal-\".concat(modalId);\n    return /*#__PURE__*/React.createElement(FocusTrap, {\n      restoreFocus: false,\n      onClose: onExit,\n      timeout: timeout,\n      key: key,\n      className: \"vkuiModalRoot__modal\"\n    }, Modal);\n  }))));\n};","map":{"version":3,"names":["React","classNames","noop","clamp","useObjectMemo","usePrevious","useWaitTransitionFinish","useDOM","getNavId","Platform","warnOnce","useConfigProvider","WebviewType","FocusTrap","ModalRootContext","useModalManager","warn","ModalRootDesktop","param","activeModalProp","activeModal","children","onOpen","onOpened","onClose","onClosed","maskElementRef","useRef","maskAnimationFrame","undefined","restoreFocusTo","document","_useConfigProvider","webviewType","platform","_useModalManager","exitingModal","onExit","getModalState","enteringModal","onEnter","onEntered","onExited","history","delayEnter","waitTransitionFinish","prevProps","_getModalState","modalRootContext","updateModalHeight","registerModal","_param","id","data","_object_without_properties","Object","assign","isInsideModal","timeout","IOS","modals","Children","toArray","animateModalOpacity","modalState","display","_modalState","innerElement","style","transition","transitionDelay","concat","opacity","setMaskOpacity","forceOpacity","arguments","length","_history","current","cancelAnimationFrame","requestAnimationFrame","_modalState_translateY","translateY","_modalState_translateYCurrent","translateYCurrent","toString","openModal","_enteringState","enteringState","closeModal","prevModalState","_prevModalState","useEffect","_document","_document_activeElement","activeElement","focus","createElement","Provider","value","className","VKAPPS","ref","onClick","map","Modal","modalId","props","key","restoreFocus"],"sources":["/Users/evgeny/Desktop/VsCodeProjects/vk-client/vk-client/node_modules/@vkontakte/vkui/src/components/ModalRoot/ModalRootDesktop.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { clamp } from '../../helpers/math';\nimport { useObjectMemo } from '../../hooks/useObjectMemo';\nimport { usePrevious } from '../../hooks/usePrevious';\nimport { useWaitTransitionFinish } from '../../hooks/useWaitTransitionFinish';\nimport { useDOM } from '../../lib/dom';\nimport { getNavId } from '../../lib/getNavId';\nimport { Platform } from '../../lib/platform';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { useConfigProvider, WebviewType } from '../ConfigProvider/ConfigProviderContext';\nimport { FocusTrap } from '../FocusTrap/FocusTrap';\nimport { ModalRootContext, ModalRootContextInterface } from './ModalRootContext';\nimport { ModalRootWithDOMProps, ModalsStateEntry } from './types';\nimport { useModalManager } from './useModalManager';\nimport styles from './ModalRoot.module.css';\n\nconst warn = warnOnce('ModalRoot');\n\nexport const ModalRootDesktop = ({\n  activeModal: activeModalProp,\n  children,\n  onOpen,\n  onOpened,\n  onClose,\n  onClosed,\n}: ModalRootWithDOMProps) => {\n  const maskElementRef = React.useRef<HTMLDivElement>(null);\n  const maskAnimationFrame = React.useRef<number | undefined>(undefined);\n  const restoreFocusTo = React.useRef<HTMLElement | undefined>(undefined);\n\n  const { document } = useDOM();\n  const { webviewType, platform } = useConfigProvider();\n  const {\n    activeModal,\n    exitingModal,\n    onExit,\n    getModalState,\n    enteringModal,\n    onEnter,\n    onEntered,\n    onExited,\n    history,\n    delayEnter,\n  } = useModalManager(activeModalProp, children, onOpen, onOpened, onClose, onClosed, noop);\n\n  const { waitTransitionFinish } = useWaitTransitionFinish();\n  const prevProps = usePrevious({\n    exitingModal,\n    enteringModal,\n    activeModal,\n  });\n  const modalRootContext: ModalRootContextInterface = useObjectMemo({\n    updateModalHeight: () => undefined,\n    registerModal: ({ id, ...data }) => Object.assign(getModalState(id) ?? {}, data),\n    onClose: onExit,\n    isInsideModal: true,\n  });\n\n  const timeout = platform === Platform.IOS ? 400 : 320;\n  const modals = React.Children.toArray(children) as React.ReactElement[];\n\n  /* Анимирует сдвиг модального окна */\n  const animateModalOpacity = (modalState: ModalsStateEntry | undefined, display: boolean) => {\n    if (modalState?.innerElement) {\n      modalState.innerElement.style.transition = '';\n      modalState.innerElement.style.transitionDelay = display && delayEnter ? `${timeout}ms` : '';\n      modalState.innerElement.style.opacity = display ? '1' : '0';\n    }\n  };\n\n  /* Устанавливает прозрачность для полупрозрачной подложки */\n  const setMaskOpacity = (modalState: ModalsStateEntry, forceOpacity: number | null = null) => {\n    if (forceOpacity === null && history?.[0] !== modalState.id) {\n      return;\n    }\n\n    if (maskAnimationFrame.current) {\n      cancelAnimationFrame(maskAnimationFrame.current);\n    }\n    maskAnimationFrame.current = requestAnimationFrame(() => {\n      if (maskElementRef.current) {\n        const { translateY = 0, translateYCurrent = 0 } = modalState;\n\n        const opacity =\n          forceOpacity === null\n            ? 1 - (translateYCurrent - translateY) / (100 - translateY) || 0\n            : forceOpacity;\n        maskElementRef.current.style.opacity = clamp(opacity, 0, 100).toString();\n      }\n    });\n  };\n\n  const openModal = () => {\n    if (!enteringModal || !prevProps) {\n      return;\n    }\n\n    const enteringState = getModalState(enteringModal);\n    onEnter();\n\n    // Анимация открытия модального окна\n    if (!prevProps.exitingModal) {\n      requestAnimationFrame(() => {\n        if (enteringModal === enteringModal) {\n          waitTransitionFinish(\n            enteringState?.innerElement,\n            () => onEntered(enteringModal),\n            timeout,\n          );\n          animateModalOpacity(enteringState, true);\n        }\n      });\n\n      return;\n    }\n\n    // Переход между модальными окнами без анимации\n    if (enteringState?.innerElement) {\n      enteringState.innerElement.style.transition = 'none';\n      enteringState.innerElement.style.opacity = '1';\n    }\n\n    onEntered(enteringModal);\n  };\n\n  const closeModal = (id: string) => {\n    const prevModalState = getModalState(id);\n    if (!prevModalState) {\n      return;\n    }\n\n    // Анимация закрытия модального окна\n    if (!activeModal) {\n      requestAnimationFrame(() => {\n        waitTransitionFinish(prevModalState?.innerElement, () => onExited(id), timeout);\n        animateModalOpacity(prevModalState, false);\n        setMaskOpacity(prevModalState, 0);\n      });\n\n      return;\n    }\n\n    // Переход между модальными окнами без анимации\n    onExited(id);\n  };\n\n  React.useEffect(() => {\n    if (!prevProps) {\n      return;\n    }\n\n    // transition phase 2: animate exiting modal\n    if (exitingModal && exitingModal !== prevProps.exitingModal) {\n      closeModal(exitingModal);\n    }\n\n    // transition phase 3: animate entering modal\n    if (enteringModal && enteringModal !== prevProps.enteringModal) {\n      openModal();\n    }\n\n    // focus restoration\n    if (activeModal && !prevProps.activeModal) {\n      restoreFocusTo.current = (document?.activeElement ?? undefined) as HTMLElement | undefined;\n    }\n    if (!activeModal && !exitingModal && restoreFocusTo.current) {\n      restoreFocusTo.current.focus();\n      restoreFocusTo.current = undefined;\n    }\n  });\n\n  if (!activeModal && !exitingModal) {\n    return null;\n  }\n\n  return (\n    <ModalRootContext.Provider value={modalRootContext}>\n      <div\n        className={classNames(\n          styles['ModalRoot'],\n          webviewType === WebviewType.VKAPPS && styles['ModalRoot--vkapps'],\n          styles['ModalRoot--desktop'],\n        )}\n      >\n        <div className={styles['ModalRoot__mask']} ref={maskElementRef} onClick={onExit} />\n        <div className={styles['ModalRoot__viewport']}>\n          {modals.map((Modal: React.ReactElement) => {\n            const modalId = getNavId(Modal.props, warn);\n            if (modalId !== activeModal && modalId !== exitingModal) {\n              return null;\n            }\n\n            const key = `modal-${modalId}`;\n\n            return (\n              <FocusTrap\n                restoreFocus={false}\n                onClose={onExit}\n                timeout={timeout}\n                key={key}\n                className={styles['ModalRoot__modal']}\n              >\n                {Modal}\n              </FocusTrap>\n            );\n          })}\n        </div>\n      </div>\n    </ModalRootContext.Provider>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}