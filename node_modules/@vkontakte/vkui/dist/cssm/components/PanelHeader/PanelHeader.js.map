{"version":3,"sources":["../../../../src/components/PanelHeader/PanelHeader.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { useAdaptivityConditionalRender } from '../../hooks/useAdaptivityConditionalRender';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { SizeType } from '../../lib/adaptivity';\nimport { Platform } from '../../lib/platform';\nimport { HasComponent, HasRef, HasRootRef } from '../../types';\nimport { useConfigProvider, WebviewType } from '../ConfigProvider/ConfigProviderContext';\nimport { FixedLayout } from '../FixedLayout/FixedLayout';\nimport { ModalRootContext } from '../ModalRoot/ModalRootContext';\nimport { Separator } from '../Separator/Separator';\nimport { Spacing } from '../Spacing/Spacing';\nimport { TooltipContainer } from '../Tooltip/TooltipContainer';\nimport { Text } from '../Typography/Text/Text';\nimport { LegacyPanelHeaderContent } from './LegacyPanelHeaderContent';\nimport styles from './PanelHeader.module.css';\n\nconst platformClassNames = {\n  ios: classNames(styles['PanelHeader--ios'], 'vkuiInternalPanelHeader--ios'),\n  android: classNames(styles['PanelHeader--android'], 'vkuiInternalPanelHeader--android'),\n  vkcom: classNames(styles['PanelHeader--vkcom'], 'vkuiInternalPanelHeader--vkcom'),\n};\n\nconst sizeXClassNames = {\n  none: styles['PanelHeader--sizeX-none'],\n  regular: styles['PanelHeader--sizeX-regular'],\n};\n\nexport interface PanelHeaderProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    HasRef<HTMLDivElement>,\n    HasRootRef<HTMLDivElement> {\n  before?: React.ReactNode;\n  /**\n   * Добавляет элемент справа.\n   *\n   * При передаче нескольких элементов, расставляет отступы между ними.\n   */\n  after?: React.ReactNode;\n  separator?: boolean;\n  transparent?: boolean;\n  shadow?: boolean;\n  /**\n   * Если `false`, то шапка будет нулевой высоты и контент панели \"залезет\" под неё\n   */\n  visor?: boolean;\n  /**\n   * Если `false`, то шапка будет в потоке. По умолчанию `true`, но если платформа vkcom, то по умолчанию `false`.\n   */\n  fixed?: boolean;\n  /**\n   * По умолчанию как `Component` используется `span`.\n   */\n  typographyProps?: HasComponent & React.HTMLAttributes<HTMLElement>;\n}\n\nconst PanelHeaderIn = ({\n  before,\n  after,\n  separator,\n  children,\n  typographyProps = {},\n}: PanelHeaderProps) => {\n  const { Component = 'span', ...restProps } = typographyProps;\n  const { webviewType } = useConfigProvider();\n  const { isInsideModal } = React.useContext(ModalRootContext);\n  const platform = usePlatform();\n\n  let typographyNode: React.ReactNode;\n\n  // TODO [>=6]: Удалить условие\n  if (\n    React.isValidElement(children) &&\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    (children as JSX.Element).type.displayName === LegacyPanelHeaderContent.displayName\n  ) {\n    typographyNode = children;\n  } else {\n    typographyNode =\n      platform === Platform.VKCOM ? (\n        <Text weight=\"2\" Component={Component} {...restProps}>\n          {children}\n        </Text>\n      ) : (\n        <Component className={styles['PanelHeader__content-in']} {...restProps}>\n          {children}\n        </Component>\n      );\n  }\n\n  return (\n    <React.Fragment>\n      <TooltipContainer fixed className={styles['PanelHeader__in']}>\n        <div\n          className={classNames(styles['PanelHeader__before'], 'vkuiInternalPanelHeader__before')}\n        >\n          {before}\n        </div>\n        <div className={styles['PanelHeader__content']}>{typographyNode}</div>\n        <div className={classNames(styles['PanelHeader__after'], 'vkuiInternalPanelHeader__after')}>\n          {(webviewType === WebviewType.INTERNAL || isInsideModal) && after}\n        </div>\n      </TooltipContainer>\n      {separator && platform === Platform.VKCOM && (\n        <Separator className={styles['PanelHeader__separator']} wide />\n      )}\n    </React.Fragment>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PanelHeader\n */\nexport const PanelHeader = ({\n  before,\n  children,\n  after,\n  separator = true,\n  visor = true,\n  transparent = false,\n  shadow,\n  getRef,\n  getRootRef,\n  fixed,\n  className,\n  typographyProps,\n  ...restProps\n}: PanelHeaderProps) => {\n  const platform = usePlatform();\n  const { webviewType } = useConfigProvider();\n  const { isInsideModal } = React.useContext(ModalRootContext);\n  const { sizeX = 'none' } = useAdaptivity();\n  const { sizeX: adaptiveSizeX } = useAdaptivityConditionalRender();\n  let isFixed = fixed !== undefined ? fixed : platform !== Platform.VKCOM;\n\n  return (\n    <div\n      {...restProps}\n      className={classNames(\n        styles['PanelHeader'],\n        'vkuiInternalPanelHeader',\n        platformClassNames.hasOwnProperty(platform)\n          ? platformClassNames[platform]\n          : platformClassNames.android,\n        transparent && styles['PanelHeader--trnsp'],\n        shadow && styles['PanelHeader--shadow'],\n        visor && classNames(styles['PanelHeader--vis'], 'vkuiInternalPanelHeader--vis'),\n        separator &&\n          visor &&\n          classNames(styles['PanelHeader--sep'], 'vkuiInternalPanelHeader--sep'),\n        webviewType === WebviewType.VKAPPS && !isInsideModal && styles['PanelHeader--vkapps'],\n        !before &&\n          classNames(styles['PanelHeader--no-before'], 'vkuiInternalPanelHeader--no-before'),\n        !after && styles['PanelHeader--no-after'],\n        isFixed && styles['PanelHeader--fixed'],\n        sizeX !== SizeType.COMPACT && sizeXClassNames[sizeX],\n        className,\n      )}\n      ref={isFixed ? getRootRef : getRef}\n    >\n      {isFixed ? (\n        <FixedLayout\n          className={classNames(styles['PanelHeader__fixed'], 'vkuiInternalPanelHeader__fixed')}\n          vertical=\"top\"\n          getRootRef={getRef}\n        >\n          <PanelHeaderIn\n            before={before}\n            after={after}\n            separator={separator}\n            typographyProps={typographyProps}\n          >\n            {children}\n          </PanelHeaderIn>\n        </FixedLayout>\n      ) : (\n        <PanelHeaderIn\n          before={before}\n          after={after}\n          separator={separator}\n          typographyProps={typographyProps}\n        >\n          {children}\n        </PanelHeaderIn>\n      )}\n      {separator && visor && platform !== Platform.VKCOM && (\n        <React.Fragment>\n          {adaptiveSizeX.compact && <Separator className={adaptiveSizeX.compact.className} />}\n          {adaptiveSizeX.regular && (\n            <Spacing className={adaptiveSizeX.regular.className} size={16} />\n          )}\n        </React.Fragment>\n      )}\n    </div>\n  );\n};\n\nPanelHeader.Content = LegacyPanelHeaderContent;\n"],"names":["React","classNames","useAdaptivity","useAdaptivityConditionalRender","usePlatform","SizeType","Platform","useConfigProvider","WebviewType","FixedLayout","ModalRootContext","Separator","Spacing","TooltipContainer","Text","LegacyPanelHeaderContent","styles","platformClassNames","ios","android","vkcom","sizeXClassNames","none","regular","PanelHeaderIn","before","after","separator","children","typographyProps","Component","restProps","webviewType","isInsideModal","useContext","platform","typographyNode","isValidElement","type","displayName","VKCOM","weight","className","Fragment","fixed","div","INTERNAL","wide","PanelHeader","visor","transparent","shadow","getRef","getRootRef","sizeX","adaptiveSizeX","isFixed","undefined","hasOwnProperty","VKAPPS","COMPACT","ref","vertical","compact","size","Content"],"mappings":"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"}