{"version":3,"sources":["../../../../src/components/ModalCardBase/ModalCardBase.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Icon24Dismiss } from '@vkontakte/icons';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { useKeyboard } from '../../hooks/useKeyboard';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { SizeType } from '../../lib/adaptivity';\nimport { Platform } from '../../lib/platform';\nimport { HasRootRef } from '../../types';\nimport { AdaptivityContext } from '../AdaptivityProvider/AdaptivityContext';\nimport { ModalDismissButton } from '../ModalDismissButton/ModalDismissButton';\nimport { PanelHeaderButton } from '../PanelHeaderButton/PanelHeaderButton';\nimport { Subhead } from '../Typography/Subhead/Subhead';\nimport { Title } from '../Typography/Title/Title';\nimport styles from './ModalCardBase.module.css';\n\nexport interface ModalCardBaseProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    HasRootRef<HTMLDivElement> {\n  /**\n   * Иконка.\n   *\n   * Может быть компонентом иконки, например, `<Icon56MoneyTransferOutline />`, или `<Avatar size={72} src=\"\" />`\n   */\n  icon?: React.ReactNode;\n\n  /**\n   * Заголовок карточки\n   */\n  header?: React.ReactNode;\n\n  /**\n   * Подзаголовок\n   */\n  subheader?: React.ReactNode;\n\n  /**\n   * Кнопки-действия. Принимает [`Button`](https://vkcom.github.io/VKUI/#/Button) с параметрами:\n   *\n   * - `size=\"l\" mode=\"primary\" stretched`\n   * - `size=\"l\" mode=\"secondary\" stretched`\n   *\n   * Для набора кнопок используйте [`ButtonGroup`](https://vkcom.github.io/VKUI/#/ButtonGroup) с параметрами:\n   *\n   * - `gap=\"s\" mode=\"horizontal\" stretched`\n   * - `gap=\"m\" mode=\"vertical\" stretched`\n   */\n  actions?: React.ReactNode;\n\n  onClose?: VoidFunction;\n\n  /**\n   * `aria-label` для кнопки закрытия. Необходим, чтобы кнопка была доступной.\n   */\n  dismissLabel?: string;\n\n  /**\n   * Задаёт контенту максимальную ширину для десктопной версии.\n   */\n  size?: number;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ModalCardBase\n */\nexport const ModalCardBase = ({\n  getRootRef,\n  icon,\n  header,\n  subheader,\n  children,\n  actions,\n  onClose,\n  dismissLabel = 'Скрыть',\n  className,\n  style,\n  size: sizeProp,\n  ...restProps\n}: ModalCardBaseProps) => {\n  const platform = usePlatform();\n  const { isDesktop } = useAdaptivityWithJSMediaQueries();\n  const isSoftwareKeyboardOpened = useKeyboard().isOpened;\n\n  const canShowCloseButtonIOS = platform === Platform.IOS && !isDesktop;\n\n  const size = isDesktop ? sizeProp : undefined;\n\n  return (\n    <div\n      {...restProps}\n      className={classNames(\n        'vkuiInternalModalCardBase',\n        platform === Platform.IOS && styles['ModalCardBase--ios'],\n        isDesktop && styles['ModalCardBase--desktop'],\n        className,\n      )}\n      ref={getRootRef}\n      style={{\n        ...style,\n        maxWidth: size,\n      }}\n    >\n      <div\n        className={classNames(\n          styles['ModalCardBase__container'],\n          isSoftwareKeyboardOpened && styles['ModalCardBase__container--softwareKeyboardOpened'],\n        )}\n      >\n        {hasReactNode(icon) && <div className={styles['ModalCardBase__icon']}>{icon}</div>}\n        {hasReactNode(header) && (\n          <Title\n            level=\"2\"\n            weight=\"2\"\n            className={classNames(\n              styles['ModalCardBase__header'],\n              'vkuiInternalModalCardBase__header',\n            )}\n          >\n            {header}\n          </Title>\n        )}\n        {hasReactNode(subheader) && (\n          <AdaptivityContext.Provider value={{ sizeY: SizeType.REGULAR }}>\n            <Subhead\n              className={classNames(\n                styles['ModalCardBase__subheader'],\n                'vkuiInternalModalCardBase__subheader',\n              )}\n            >\n              {subheader}\n            </Subhead>\n          </AdaptivityContext.Provider>\n        )}\n\n        {children}\n\n        {hasReactNode(actions) && <div className={styles['ModalCardBase__actions']}>{actions}</div>}\n\n        {isDesktop && <ModalDismissButton onClick={onClose} />}\n        {canShowCloseButtonIOS && (\n          <PanelHeaderButton\n            aria-label={dismissLabel}\n            className={styles['ModalCardBase__dismiss']}\n            onClick={onClose}\n          >\n            <Icon24Dismiss />\n          </PanelHeaderButton>\n        )}\n      </div>\n    </div>\n  );\n};\n"],"names":["ModalCardBase","getRootRef","icon","header","subheader","children","actions","onClose","dismissLabel","className","style","size","sizeProp","restProps","platform","usePlatform","isDesktop","useAdaptivityWithJSMediaQueries","isSoftwareKeyboardOpened","useKeyboard","isOpened","canShowCloseButtonIOS","Platform","IOS","undefined","div","classNames","ref","maxWidth","hasReactNode","Title","level","weight","AdaptivityContext","Provider","value","sizeY","SizeType","REGULAR","Subhead","ModalDismissButton","onClick","PanelHeaderButton","aria-label","Icon24Dismiss"],"mappings":";;;;+BAiEaA;;;eAAAA;;;;;;;+DAjEU;qBACO;oBACW;+CACO;2BACpB;2BACA;0BACH;wBACA;iCAES;kCACC;iCACD;uBACV;qBACF;AAoDf,IAAMA,gBAAgB;QAC3BC,oBAAAA,YACAC,cAAAA,MACAC,gBAAAA,QACAC,mBAAAA,WACAC,kBAAAA,UACAC,iBAAAA,SACAC,iBAAAA,sCACAC,cAAAA,gDAAe,gCACfC,mBAAAA,WACAC,eAAAA,OACAC,AAAMC,kBAAND,MACGE;QAXHZ;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;;IAGA,IAAMG,WAAWC,IAAAA,wBAAW;IAC5B,IAAM,AAAEC,YAAcC,IAAAA,gEAA+B,IAA7CD;IACR,IAAME,2BAA2BC,IAAAA,wBAAW,IAAGC,QAAQ;IAEvD,IAAMC,wBAAwBP,aAAaQ,kBAAQ,CAACC,GAAG,IAAI,CAACP;IAE5D,IAAML,OAAOK,YAAYJ,WAAWY;IAEpC,qBACE,qBAACC,mDACKZ;QACJJ,WAAWiB,IAAAA,gBAAU,EACnB,6BACAZ,aAAaQ,kBAAQ,CAACC,GAAG,8BACzBP,2CACAP;QAEFkB,KAAK1B;QACLS,OAAO,4CACFA;YACHkB,UAAUjB;;sBAGZ,qBAACc;QACChB,WAAWiB,IAAAA,gBAAU,kCAEnBR;OAGDW,IAAAA,kBAAY,EAAC3B,uBAAS,qBAACuB;QAAIhB,SAAS;OAAkCP,OACtE2B,IAAAA,kBAAY,EAAC1B,yBACZ,qBAAC2B,YAAK;QACJC,OAAM;QACNC,QAAO;QACPvB,WAAWiB,IAAAA,gBAAU,+BAEnB;OAGDvB,SAGJ0B,IAAAA,kBAAY,EAACzB,4BACZ,qBAAC6B,oCAAiB,CAACC,QAAQ;QAACC,OAAO;YAAEC,OAAOC,oBAAQ,CAACC,OAAO;QAAC;qBAC3D,qBAACC,gBAAO;QACN9B,WAAWiB,IAAAA,gBAAU,kCAEnB;OAGDtB,aAKNC,UAEAwB,IAAAA,kBAAY,EAACvB,0BAAY,qBAACmB;QAAIhB,SAAS;OAAqCH,UAE5EU,2BAAa,qBAACwB,sCAAkB;QAACC,SAASlC;QAC1Cc,uCACC,qBAACqB,oCAAiB;QAChBC,cAAYnC;QACZC,SAAS;QACTgC,SAASlC;qBAET,qBAACqC,oBAAa;AAM1B"}