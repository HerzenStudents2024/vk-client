{"version":3,"sources":["../../../../src/components/ConfigProvider/ConfigProvider.tsx"],"sourcesContent":["import * as React from 'react';\nimport { noop } from '@vkontakte/vkjs';\nimport { generateVKUITokensClassName } from '../../helpers/generateVKUITokensClassName';\nimport { useAutoDetectAppearance } from '../../hooks/useAutoDetectAppearance';\nimport { useObjectMemo } from '../../hooks/useObjectMemo';\nimport { useDOM } from '../../lib/dom';\nimport { TokensClassProvider } from '../../lib/tokensClassProvider';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport {\n  ConfigProviderContext,\n  ConfigProviderContextInterface,\n  useConfigProvider,\n} from './ConfigProviderContext';\n\nexport interface ConfigProviderProps extends Partial<ConfigProviderContextInterface> {\n  onDetectAppearanceByBridge?: () => void;\n  children: React.ReactNode;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ConfigProvider\n */\nexport const ConfigProvider = (props: ConfigProviderProps) => {\n  const parentConfig = useConfigProvider();\n\n  const {\n    children,\n    webviewType,\n    isWebView,\n    transitionMotionEnabled,\n    platform,\n    locale,\n    appearance: appearanceProp,\n    onDetectAppearanceByBridge = noop,\n  } = {\n    ...parentConfig,\n    ...props,\n  };\n\n  const appearance = useAutoDetectAppearance(appearanceProp, onDetectAppearanceByBridge);\n\n  const { document } = useDOM();\n\n  useIsomorphicLayoutEffect(() => {\n    const VKUITokensClassName = generateVKUITokensClassName(platform, appearance);\n\n    // eslint-disable-next-line no-restricted-properties\n    document!.body.classList.add(VKUITokensClassName);\n\n    return () => {\n      // eslint-disable-next-line no-restricted-properties\n      document!.body.classList.remove(VKUITokensClassName);\n    };\n  }, [platform, appearance]);\n\n  const configContext = useObjectMemo({\n    webviewType,\n    isWebView,\n    transitionMotionEnabled,\n    platform,\n    locale,\n    appearance,\n  });\n\n  return (\n    <ConfigProviderContext.Provider value={configContext}>\n      <TokensClassProvider platform={platform} appearance={appearance}>\n        {children}\n      </TokensClassProvider>\n    </ConfigProviderContext.Provider>\n  );\n};\n"],"names":["ConfigProvider","props","parentConfig","useConfigProvider","children","webviewType","isWebView","transitionMotionEnabled","platform","locale","appearance","appearanceProp","onDetectAppearanceByBridge","noop","useAutoDetectAppearance","document","useDOM","useIsomorphicLayoutEffect","VKUITokensClassName","generateVKUITokensClassName","body","classList","add","remove","configContext","useObjectMemo","ConfigProviderContext","Provider","value","TokensClassProvider"],"mappings":";;;;+BAsBaA;;;eAAAA;;;;;+DAtBU;oBACF;2CACuB;uCACJ;6BACV;mBACP;mCACa;yCACM;qCAKnC;AAUA,IAAMA,iBAAiB,SAACC;IAC7B,IAAMC,eAAeC,IAAAA,wCAAiB;IAEtC,IASI,mBAAA,qBACCD,cACAD,QAVHG,WAQE,iBARFA,UACAC,cAOE,iBAPFA,aACAC,YAME,iBANFA,WACAC,0BAKE,iBALFA,yBACAC,WAIE,iBAJFA,UACAC,SAGE,iBAHFA,QACAC,AAAYC,iBAEV,iBAFFD,wDAEE,iBADFE,4BAAAA,oFAA6BC,UAAI;IAMnC,IAAMH,aAAaI,IAAAA,gDAAuB,EAACH,gBAAgBC;IAE3D,IAAM,AAAEG,WAAaC,IAAAA,WAAM,IAAnBD;IAERE,IAAAA,oDAAyB,EAAC;QACxB,IAAMC,sBAAsBC,IAAAA,wDAA2B,EAACX,UAAUE;QAElE,oDAAoD;QACpDK,SAAUK,IAAI,CAACC,SAAS,CAACC,GAAG,CAACJ;QAE7B,OAAO;YACL,oDAAoD;YACpDH,SAAUK,IAAI,CAACC,SAAS,CAACE,MAAM,CAACL;QAClC;IACF,GAAG;QAACV;QAAUE;KAAW;IAEzB,IAAMc,gBAAgBC,IAAAA,4BAAa,EAAC;QAClCpB,aAAAA;QACAC,WAAAA;QACAC,yBAAAA;QACAC,UAAAA;QACAC,QAAAA;QACAC,YAAAA;IACF;IAEA,qBACE,qBAACgB,4CAAqB,CAACC,QAAQ;QAACC,OAAOJ;qBACrC,qBAACK,wCAAmB;QAACrB,UAAUA;QAAUE,YAAYA;OAClDN;AAIT"}